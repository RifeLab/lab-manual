<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Trevor Rife" />
  <meta name="dcterms.date" content="2024-09-20" />
  <title>Rife Lab Manual</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
    }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
  <!--
  Manubot generated metadata rendered from header-includes-template.html.
  Suggest improvements at https://github.com/manubot/manubot/blob/main/manubot/process/header-includes-template.html
  -->
  <meta name="dc.format" content="text/html" />
  <meta property="og:type" content="article" />
  <meta name="dc.title" content="Rife Lab Manual" />
  <meta name="citation_title" content="Rife Lab Manual" />
  <meta property="og:title" content="Rife Lab Manual" />
  <meta property="twitter:title" content="Rife Lab Manual" />
  <meta name="dc.date" content="2024-09-20" />
  <meta name="citation_publication_date" content="2024-09-20" />
  <meta property="article:published_time" content="2024-09-20" />
  <meta name="dc.modified" content="2024-09-20T10:06:04+00:00" />
  <meta property="article:modified_time" content="2024-09-20T10:06:04+00:00" />
  <meta name="dc.language" content="en-US" />
  <meta name="citation_language" content="en-US" />
  <meta name="dc.relation.ispartof" content="Manubot" />
  <meta name="dc.publisher" content="Manubot" />
  <meta name="citation_journal_title" content="Manubot" />
  <meta name="citation_technical_report_institution" content="Manubot" />
  <meta name="citation_author" content="Trevor Rife" />
  <meta name="citation_author_institution" content="Clemson University" />
  <meta name="citation_author_orcid" content="0000-0002-5974-6523" />
  <link rel="canonical" href="https://trife.github.io/lab-manual/" />
  <meta property="og:url" content="https://trife.github.io/lab-manual/" />
  <meta property="twitter:url" content="https://trife.github.io/lab-manual/" />
  <meta name="citation_fulltext_html_url" content="https://trife.github.io/lab-manual/" />
  <meta name="citation_pdf_url" content="https://trife.github.io/lab-manual/manuscript.pdf" />
  <link rel="alternate" type="application/pdf" href="https://trife.github.io/lab-manual/manuscript.pdf" />
  <link rel="alternate" type="text/html" href="https://trife.github.io/lab-manual/v/94172ac2c0f4735c4c6ef730bc180db7e832266f/" />
  <meta name="manubot_html_url_versioned" content="https://trife.github.io/lab-manual/v/94172ac2c0f4735c4c6ef730bc180db7e832266f/" />
  <meta name="manubot_pdf_url_versioned" content="https://trife.github.io/lab-manual/v/94172ac2c0f4735c4c6ef730bc180db7e832266f/manuscript.pdf" />
  <meta property="og:type" content="article" />
  <meta property="twitter:card" content="summary_large_image" />
  <link rel="icon" type="image/png" sizes="192x192" href="https://manubot.org/favicon-192x192.png" />
  <link rel="mask-icon" href="https://manubot.org/safari-pinned-tab.svg" color="#ad1457" />
  <meta name="theme-color" content="#ad1457" />
  <!-- end Manubot generated metadata -->
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Rife Lab Manual</h1>
</header>
<p><small><em>
This manuscript
(<a href="https://trife.github.io/lab-manual/v/94172ac2c0f4735c4c6ef730bc180db7e832266f/">permalink</a>)
was automatically generated
from <a href="https://github.com/trife/lab-manual/tree/94172ac2c0f4735c4c6ef730bc180db7e832266f">trife/lab-manual@94172ac</a>
on September 20, 2024.
</em></small></p>
<h2 id="authors">Authors</h2>
<ul>
<li><strong>Trevor Rife</strong>
<br>
<img src="images/orcid.svg" class="inline_icon" width="16" height="16" alt="ORCID icon" />
<a href="https://orcid.org/0000-0002-5974-6523">0000-0002-5974-6523</a>
· <img src="images/github.svg" class="inline_icon" width="16" height="16" alt="GitHub icon" />
<a href="https://github.com/trife">trife</a>
<br>
<small>
Clemson University
</small></li>
</ul>
<h2 class="page_break_before" id="introduction">Introduction</h2>
<h3 id="welcome">Welcome</h3>
<p>We’re happy you’ve decided to join the Rife Lab at Clemson University.
We’re really glad to have you as a team member and will do what we can to make your time in the lab amazing.
We hope you’ll learn a lot about plant breeding, develop new skills (coding, data analysis, writing, giving talks), make new friends, and have a great deal of fun throughout the whole process.</p>
<p>This manual was developed by me, Trevor Rife, to provide a structured vision for how the lab should function and to complement existing Clemson University policies (which take precedence).
When you join the lab, you’re expected to read this manual and sign a <a href="todo:%20link">form</a> indicating that you have done so.
You’re also highly encouraged to read it while deciding if you want to join the lab in the first place.
You should always feel free to talk to Trevor for clarity about anything in the lab manual or to suggest improvements.</p>
<h3 id="mission">Mission</h3>
<p>The Rife lab seeks to develop, validate, and implement new tools and technologies into breeding programs around the globe.
Using these tools, we aim to better understand the genetic control of economically important traits in crops that are regionally relevant for the Southeastern United States.
Critical to this goal is training the next generation of scientists, creating a safe and inclusive space for research, and facilitating an open and collaborative environment that promotes scientific advancement.</p>
<h3 id="guiding-principles">Guiding Principles</h3>
<ol type="1">
<li>Scientists are human beings. All human beings have equal innate value and are welcomed and encouraged to be their authentic selves in our lab.</li>
<li>Lab groups are more creative, productive, and successful when people from diverse backgrounds collaborate with and learn from each other.</li>
<li>A collegial and welcoming lab environment is the ideal way to encourage research excellence, extension excellence, personal growth, professional growth, and overall productivity.</li>
<li>Developing independent problem solving skills is more important than perfect execution of process and protocol.</li>
<li>We value independence and motivation. We give our people the environment, support, and resources they need to succeed, and trust them to get the job done.</li>
<li>Continuous attention to technical excellence and quality experimental design enhances discovery and innovation.</li>
<li>Efficiency and simplicity–the art of maximizing the amount of work not done–are essential.</li>
<li>We reflect regularly on how to become more effective and adjust behavior accordingly.</li>
</ol>
<h3 id="reference">Reference</h3>
<p>This manual was adapted from other lab manuals developed by <a href="https://github.com/greenelab/onboarding">Casey Greene</a>, <a href="https://github.com/HershbergerLab/onboarding">Jenna Hershberger</a>, <a href="https://github.com/alylab/labmanual">Mariam Aly</a>, <a href="http://rilab.ucdavis.edu/expectations.html">Jeffrey Ross-Ibara</a>, <a href="https://github.com/jpeelle/peellelab_manual">Jonathan Peelle</a>, <a href="https://www.pulsebreeding.ca/people/lab-policies">Valerio Hoyos-Villegas</a>, <a href="https://www.braceroots.com/policies.html">Erin Sparks</a>, <a href="https://github.com/ahulsekemp">Amanda Hulse-Kemp</a>, and <a href="https://github.com/jeanlucj">Jean-Luc Jannink</a>.
This version is distributed under a CC-BY 4.0 License.</p>
<p>The repository for this manual is on <a href="https://github.com/rifelab/lab-manual">GitHub</a>.
To propose changes: fork the repository, edit the files you wish, create a pull request, and assign Trevor to review the changes.</p>
<h2 class="page_break_before" id="philosophy">Philosophy</h2>
<h3 id="big-picture">Big Picture</h3>
<ul>
<li>Science is hard, but it’s also exciting and fun. In the Rife Lab, we want to make sure that everyone experiences a positive, engaging, hostility-free, challenging, and rewarding lab environment.</li>
<li>Work on what you’re passionate about, work hard at it, and be proud of it.</li>
<li>Scientists have to be careful. Don’t rush your work–double and triple check it. Incorporate sanity checks. Ask others to look at your code or data if you need help or something looks off. It’s ok to make mistakes, we all make them, but mistakes shouldn’t be because of carelessness or rushed work. Talking to others is often the fastest way to get over a hurdle.</li>
<li>Admit mistakes. Correct them and move on. If you do make a mistake, inform collaborators as needed.</li>
<li>It is never ok to plagiarize, tamper with data, make up data, omit data, or fudge results in any way. Science is about finding out the truth, and null results and unexpected results are still important. This can’t be emphasized enough: no research misconduct!</li>
<li>Support your fellow lab-mates. Help them out if they need help and let them vent when they need to. Science is collaborative, not competitive - especially in our lab where we’re working on different projects. Help others, and you can expect others to help you when you need it. Give credit to those that have helped you via acknowledgements and co-authorships.</li>
<li>Respect your fellow lab-mates. Respect each other’s strengths, weaknesses, different cultures, religions and beliefs, respect their desire for quiet if they need it, and for support and a kind ear when they need that.</li>
<li>Communicate open and respectfully with other members of the lab.</li>
<li>If you’re struggling, tell someone (feel free to tell Trevor!). Your health and happiness come first. The lab looks out for the well-being of all its members. We are here to help. It’s ok to go through hard patches, but you shouldn’t feel shy about asking for help or just venting.</li>
<li>Tension and hostility are barriers to research progress. We can’t thrive in an environment we aren’t comfortable in, and disrespect or rudeness will not be tolerated. If specific issues are causing problems, tell Trevor.</li>
<li>If you have a problem with Trevor and are comfortable telling him about it, do! If you aren’t comfortable, then tell another member of the Plant and Environmental Sciences Department or administration at the Pee Dee REC.</li>
<li>Academia may feel different from other types of jobs, but it is still a job. You should treat coming into the lab with the same respect that you would treat any other position. See Hours.</li>
<li>Stay up to date on the latest research by using RSS feeds and/or getting journal table of contents. Also consider following scientists in the field on social media.</li>
</ul>
<h3 id="small-picture">Small Picture</h3>
<ul>
<li>If you’re sick, stay home and take care of yourself. Because you need it and also because others don’t need to get sick. Reschedule your meetings for the day (or the next couple of days) as soon as you can.</li>
<li>Notify Trevor if you will be out, either due to illness or vacation. Make a note on the lab travel calendar.</li>
<li>Take a vacation! Good science benefits from clear thinking. When going on vacation, make sure to fill out your leave requests through the appropriate system, notify Trevor, and make sure to put it on lab travel calendar.</li>
<li>Keep track of your own deadlines. Everyone works on slightly different things and will have different deadlines. Be sure to keep an organized calendar system so you remember what you need to turn in and when.</li>
<li>You aren’t expected to come into lab on weekends and holidays (follow the schedule for Clemson). You aren’t expected to stay late at night. You are expected to get your work done (whatever time of day you like to do it).</li>
<li>Show up to your meetings, show up to your classes, and show up to lab meetings. Work the hours you need to work to get stuff done. Everyone is expected to be at all lab meetings unless you have an excused absence.</li>
<li>Participate in relevant department and Pee Dee REC activities. These events are a good way to meet other scientists and help build camaraderie with your colleagues.</li>
<li>Keep the lab tidy. Put lab equipment back where you found it. Keep common areas uncluttered.</li>
<li>Dress code is casual but not too casual. When interacting with stakeholders or presenting your work, your attire should be representative of the impression you want to give. Don’t wear pajamas and sweatpants, but in most cases jeans are generally acceptable. Wear appropriate clothing for work in the field or greenhouse.</li>
<li>Be on time. Especially when you are running experiments or leading meetings. Respect that others also have busy schedules and everyone’s time is valuable. If you will be late, notify others if you can.</li>
<li>Be a good lab member, which includes helping with shared responsibilities, maintenance of a safe and clean space, and demonstration of respect towards personnel.</li>
</ul>
<h2 class="page_break_before" id="code-of-conduct">Code of Conduct</h2>
<p>All members of the lab, including visitors, are expected to follow this code of conduct.
We expect cooperation from all members to help ensure a safe environment for everyone.</p>
<p><strong>The lab is dedicated to providing a harassment-free experience for everyone.</strong><br />
<strong>We do not tolerate harassment of lab members in any form.</strong></p>
<h3 id="harassment">Harassment</h3>
<p>The lab is committed to ensuring a safe, friendly, and accepting environment for everybody.
We will not tolerate any verbal or physical harassment or discrimination on the basis of gender, gender identity and expression, sexual orientation, disability, physical appearance, body size, race, or religion.
We will not tolerate intimidation, stalking, following, unwanted photography or video recording, sustained disruption of talks or other events, inappropriate physical contact, and unwelcome sexual attention.
Members asked to stop any harassing behavior are expected to comply immediately.
Sexual language and imagery is generally not appropriate for any lab venue, including lab meetings, presentations, or discussions.</p>
<p>If you are being harassed, notice that someone else is being harassed, or have any other concerns, please contact Trevor immediately.
If Trevor is the cause of your concern, talk with one of the other members of the PDREC administrative staff.
For official concerns, please see the <a href="https://www.clemson.edu/administration/ombuds/index.html">Clemson University ombuds office</a>.</p>
<h3 id="respect">Respect</h3>
<p>You are expected to be respectful, tolerant, and non-discriminatory towards your colleagues both in the lab and at the university.
We adhere to all university policies on harassment and discrimination.
I expect lab members to contribute to a productive and friendly environment conducive to learning and research.
This includes treating your colleagues with respect, listening to others’ viewpoints and ideas, and ensuring the lab is a place where everybody feels welcome and appreciated.</p>
<h3 id="scientific-integrity">Scientific Integrity</h3>
<p>All members of the Rife lab are expected to conduct research with the highest standard of rigor and integrity while upholding Clemson’s <a href="https://www.clemson.edu/administration/compliance/standards-ethical-conduct.html">Standards of Ethical Conduct</a>.</p>
<p>You have a responsibility to me, the institutions that support our work, and the broader scientific community to maintain the highest standards of scientific accuracy and integrity while being a faithful steward of state and federal grant funds.
By being in the lab, you agree to adhere to professional ethical standards including accurate documentation of experimental design, results, and interpretation in a lab notebook.
You are obligated to be honest, trustworthy, and transparent in your scientific research.</p>
<p>It is also important that you prioritize the accuracy of your work.
Unintentional errors due to inattentiveness or rushing can be extremely damaging and produce results that turn out to be incorrect.
It is critical that experiments are designed to minimize error and maximize quality results.
Please double-check your work frequently and don’t hesitate to ask a colleague to look over a dataset or analysis.</p>
<p>If you have any questions, or in the unlikely event that you have concerns about a research practice you have seen in the lab, please talk to me immediately.
If you are feeling pressured to succeed (publish a lot, publish in high impact journals, etc.), you should reach out to Trevor to discuss.
This pressure is something we all face but is never an excuse for research misconduct.</p>
<h3 id="research-misconduct">Research Misconduct</h3>
<p>The Rife Lab is committed to ensuring research integrity and we take a hard line on research misconduct.
We will not tolerate plagiarism, fabrication, or falsification.
These activities are unacceptable in any form, whether as part of course work or research activities.
Plagiarism and falsifying information have severe consequences including course failure, possible firing, or dismissal from the degree program.
Research misconduct is a disservice to you and risks your entire career.
It is never right and never worth it. Don’t do it.</p>
<p>From the <a href="https://www.clemson.edu/academics/integrity/plagiarism.html">Clemson University Academic Integrity Policy</a>:</p>
<blockquote>
<p>“Plagiarism, which includes the intentional or unintentional copying of language, structure, or ideas of another and attributing the work to one’s own efforts” is absolutely not allowed, whether as part of course work or research activities.”</p>
</blockquote>
<p>From the <a href="https://www.clemson.edu/graduate/academics/policies-and-procedures.html">Graduate School Policy handbook</a>:
&gt; “Fabricating or falsifying information involves actions such as making up data that were not collected, stating that studies were conducted that were not, indicating that original source material was read when information was obtained from secondary or tertiary sources, making up references not used, or identifying sources that were not consulted (e.g., telephone interviews).”</p>
<h2 class="page_break_before" id="safety">Safety</h2>
<p>Your health and safety are more important than your research and require adhering to lab safety codes.
Never work in the lab if you are feeling sick, under medication that might affect your ability to work normally, or are under the effects of any kind of drug.
Avoid working in the lab by yourself doing potentially dangerous activities, and please be aware of Clemson resources and training on lab safety.</p>
<p>All lab members are expected to comply with University, REC, and lab safety protocols.
All lab members are must undergo mandatory comprehensive safety training for lab and pesticide safety.
Lab safety and other trainings will be presented online via TigerTraining or Bioraft/Scishield.
Contact <a href="mailto:speders@clemson.edu">Sara Pederson</a> to schedule your pesticide safety training.
Information specific to the Pee Dee REC can be found on the <a href="https://www.clemson.edu/cafls/research/peedee/safety_compliance.html">REC website</a></p>
<h3 id="safety-data-sheets-sds">Safety Data Sheets (SDS)</h3>
<p>SDS are an excellent source of information on the health and physical hazards of chemicals.
SDS should always be reviewed before using a new chemical.
Our SDSs are located in (todo).
When a new chemical is purchased, the ordering party is responsible for adding the SDS into our collection.</p>
<h3 id="gloves">Gloves</h3>
<ul>
<li><em>Do not touch door handles, elevator buttons, OR PHONES with gloved hands!</em></li>
<li>Gloves should not be worn outside of the lab.</li>
<li>Wash hands every time gloves are removed.</li>
<li>Wash hands before leaving the lab for any reason.</li>
<li>Gloves should not be worn while using a cell phone.</li>
<li>Disposable lab gloves should not be reused once they are removed.</li>
<li>Remove gloves in lab when not needed for handling chemicals to minimize the potential for contamination of lab surfaces.</li>
<li>Gloves that have contact involving acutely/highly toxic chemicals or <a href="https://www.epa.gov/hw/defining-hazardous-waste-listed-characteristic-and-mixed-radiological-wastes#PandU">P-listed chemicals</a> should be disposed of as hazardous waste. Carefully remove these gloves, avoiding contact with skin. Wash hands with soap and water before putting on new gloves.</li>
</ul>
<h3 id="lab-attire">Lab Attire</h3>
<p>New lab members may request a lab coat if necessary for your research.
When performing experiments, members should wear closed toe shoes, long pants, and should tie back long hair.</p>
<h3 id="injuries-and-accidents">Injuries and Accidents</h3>
<p>In case of injury, it is an employee’s responsibility to notify his/her supervisor or department head immediately.
Any injury, no matter how slight, must be reported to Trevor.
Follow the <a href="https://www.clemson.edu/administration/risk/workers-comp/">injury or accident reporting procedures</a>.
There are <a href="https://media.clemson.edu/research/safety/DSCs/Incident_Report_Form.pdf">separate forms</a> that must be filled out depending on whether or not medical treatment was required.</p>
<h3 id="emergencies">Emergencies</h3>
<p>Hurricane season is June 1 - November 30.
In the event of a tropical storm or hurricane, please follow <a href="https://www.scemd.org/stay-informed/publications/hurricane-guide">state</a>, university, and PDREC guidelines.</p>
<p>Loss of power is common at PDREC during storms.
There is a generator for the building, but it occasionally fails.
In the event of power loss while you’re workign in the lab, unplug hot plates or other equipment and store in-progress samples if possible and safe. <strong>Do not open any fridges or freezers if the power is off.</strong></p>
<h3 id="references">References</h3>
<ul>
<li><a href="https://www.clemson.edu/research/oes/">Clemson’s Occupational and Environmental Safety</a></li>
<li><a href="https://www.clemson.edu/research/oes/biosafety/">Biological Safety</a></li>
<li><a href="https://www.clemson.edu/research/oes/shipping.html">Hazardous Material Shipping</a></li>
<li><a href="https://www.clemson.edu/research/oes/hazardouswaste/">Hazardous Waste Management</a></li>
<li><a href="https://www.clemson.edu/research/oes/lab-door.html">Lab Door Signs</a></li>
<li><a href="https://www.clemson.edu/research/oes/chemsafety/">Lab Safety</a></li>
<li><a href="https://www.clemson.edu/research/oes/manuals/">Online Safety Manuals</a></li>
<li><a href="https://www.clemson.edu/research/oes/ihsafety/respiratoryprot.html">Respiratory Protection</a></li>
</ul>
<h2 class="page_break_before" id="expectations">Expectations</h2>
<p>You are ultimately responsible for the success of your research project and career development.
As a member of the lab, you are expected to participate fully in the team and contribute to a healthy and productive research environment.
When disagreements about methodological approaches arise, you recognize that these should be resolved through a solid and reproducible analysis of available data.
If you aren’t sure — ask.
Members are expected to behave respectfully, ethically, professionally and safely while working within and outside the research group.
Mistreatment will not be tolerated.</p>
<h3 id="pi">PI</h3>
<ul>
<li>Maintain and communicate a vision of where the lab is going.</li>
<li>Be accountable for the outputs from our research group.</li>
<li>Give perspective on the field and tips about surviving and thriving with your research.</li>
<li>Attend project and department meetings and pass on relevant information at lab meetings.</li>
<li>Be available on a regular basis to discuss your progress (and anything else you’d like to discuss).</li>
<li>Support your research (scentifically, financially, emotionally).</li>
<li>Work with you to develop project ideas, provide guideance, plan experiments, and perform analyses.</li>
<li>Provide timely feedback on ideas, conference posters, talks, manuscripts, figures, grants, applications, communications, etc.</li>
<li>Provide training in written and oral communication skills, lab management, ethical research practices, and professionalism.</li>
<li>Help you prepare for the next step of your career by discussing goals and tracking progress.</li>
<li>Support your career development by introducing you to other researchers, promoting your work, writing recommendation letters, and letting you attend relevant conferences as often as finances permit.</li>
<li>Maintain a healthy, fair, and productive work environment.</li>
<li>Care for your emotional and physical well-being, and prioritize that above all else.</li>
</ul>
<h3 id="staff">Staff</h3>
<ul>
<li>Contribute to guiding and developing the vision for where the lab is going.</li>
<li>Develop, support and help manage current grant projects.</li>
<li>Prepare and apply for grants to support lab interests.</li>
<li>Develop training materials to help support lab activities.</li>
<li>Serve as a reference to answer questions from new lab members.</li>
<li>Oversee the hiring, scheduling, and training of undergraduate research assistants.</li>
<li>Give new lab members access to electronic lab resources.</li>
<li>Assist lab members with data collection and analysis.</li>
<li>Be available on a regular basis.</li>
</ul>
<h3 id="postdocs">Postdocs</h3>
<ul>
<li>Develop your own independent line of research (plan, design, and conduct experiments).</li>
<li>Maintain legible and thorough documentation about your research including directories of data, annotated code, and detailed methods that are sufficient to reproduce results without additional instructions.</li>
<li>Write and submit manuscripts. I expect postdocs to publish at least 1-2 papers per year (as first or co-author).</li>
<li>Help train and mentor students in the lab (both undergraduate and graduate) when they need it.</li>
<li>Participate in general lab responsibilities.</li>
<li>Assist in proofreading of manuscripts and providing constructive feedback for other lab members.</li>
<li>Help prepare grant reports for the projects that are providing your funding.</li>
<li>Present your research at conferences and departmental events.</li>
<li>Apply for external funding (either individual postdoc fellowships or contributing to larger lab grant writing). Though I will only hire you if I can support you for at least one year, it’s in your best interest to get experience writing grants.</li>
<li>Apply for jobs when you’re ready. Let me know when you’re applying for positions so that I can support you and connect you with people that may be able to help you be successful with your applications.</li>
<li>Challenge me when I’m wrong or when your opinion is different.</li>
<li>Treat the rest of the lab to your unique expertise.</li>
</ul>
<h3 id="graduate-students">Graduate Students</h3>
<ul>
<li>Develop your dissertation or thesis research. A dissertation should have at least three substantial experiments that answer a big-picture question that you have. Much of your work has to be done independently, but remember that others in lab are there to help you when you need it.</li>
<li>Write and submit manuscripts. Students should produce at least three publications over the course of their PhD.</li>
<li>Plan, design, and conduct research projects, including establishing a timeline for when projects will be completed.</li>
<li>Prioritize your research. Coursework is important, but your research gets you your PhD and prepares you for the next stage of your career.</li>
<li>Maintain legible and thorough documentation about your research including directories of data, annotated codes, and detailed methods that are sufficient to reproduce results without additional instructions.</li>
<li>Participate in general lab responsibilities.</li>
<li>Help mentor undergraduate students in the lab when they need it</li>
<li>Present your work at departmental events, other labs, and conferences when funding is available.</li>
<li>Think about what you want for your career (academia – research or teaching, industry, science writing, something else), and talk to Trevor about it to make sure you’re getting the training you need.</li>
<li>Make sure you meet all departmental deadlines (e.g., for your exams and thesis) – and make sure Trevor is aware of them!</li>
<li>Apply for grants (e.g., USDA or NSF predoctoral fellowship).</li>
<li>Help summarize your results for grant reports and presentations.</li>
<li>Bring questions or concerns related to enrollment, travel issues, visa issues, etc. to Trevor’s attention.</li>
<li>Understand the requirements for your graduation (todo link to other section)</li>
</ul>
<h3 id="undergraduate-students">Undergraduate students</h3>
<ul>
<li>Assist other lab members with data collection and analysis or work on your independent research project.</li>
<li>Develop a weekly schedule with your lab mentor that allows enough time each week to complete your work.</li>
<li>For course credit research, you must attend lab meetings, present at one lab meeting, and submit a write-up of your research by the end of the semester.</li>
</ul>
<h3 id="interns">Interns</h3>
<ul>
<li>Develop your research project that was outlined at the start of your internship.</li>
<li>Help other students in the lab when needed.</li>
<li>Present your work during lab meetings, through publication, to other labs, and/or conference presentations.</li>
<li>Help summarize your results for grant reports and presentations.</li>
<li>Make sure you meet all departmental deadlines.</li>
<li>Maintain accurate records regarding your research project so that your work can be replicated or continued.</li>
<li>Attend lab meetings, present at one lab meetings, and submit a write-up of your research at the end of your internship.</li>
<li>Understand the University rules for your working hour limitations (generally 20 hours/week during semesters).</li>
</ul>
<h3 id="visiting-scientists">Visiting Scientists</h3>
<ul>
<li>Develop your research project that was outlined as a part of your planned visit.</li>
<li>Mentor undergraduate students when needed.</li>
<li>Regularly meet with Trevor to report progress, present results, and discuss any concerns about your visit.</li>
<li>Present regularly at lab meetings on your project results.</li>
<li>Meet all deadlines regarding your visit and keep me informed of any information from your home institution related to your visit.</li>
</ul>
<h2 class="page_break_before" id="hours-and-leave">Hours and Leave</h2>
<h3 id="hours">Hours</h3>
<p>Flexible working hours are a big benefit to working in an academic lab.
My primary concern is that you get your work done in order to complete both individual and group goals.
To promote communication and interaction, lab members are generally expected to be present (or remotely available) for the majority of normal business hours (9am-5pm, Monday-Friday), since this is when most academic activities occur.
However, I expect members to set a schedule for them that best facilitates their productivity and personal happiness.
Note that you may need to adjust your hours to complete specific tasks or work with partners (e.g., the PDREC farm crew works from 7am-3pm, meeting with international collaborators on projects, etc.).
Your schedule should include time to attend weekly lab and one-on-one meetings.
You are not expected to regularly work more than a normal 40-hour work week.</p>
<p>There may be rare times when your project requires working late at night or on the weekends.
If you are in lab by yourself on the evenings or weekends, make sure that someone (the PI, other lab members, or a family member) knows that you are there.
This is for your safety and the safety of others.</p>
<h3 id="pi-hours">PI Hours</h3>
<p>I am generally available during the work day and prioritize answering Slack messages.
I am usually unavailable during the weekend, so ensure that I’m aware of any impending deadlines.
I will occassionally send emails or Slack messages outside of normal working hours–I do not expect you to respond to any messages outside of normal working hours.
If off-hours messages are unwelcome, please let me know.
In case of emergencies, contact me by cell phone at any time.</p>
<h3 id="remote-work">Remote Work</h3>
<p>Work from whatever location best facilitates your ability to complete the duties of your job and supports your productivity.
There is no limit on work remote, as long as you are making satisfactory progress towards mutually agreed upon goals as determined by you and Trevor.
However, you are encouraged to make time for regular in-person interactions with lab members and department colleagues.</p>
<ul>
<li>You are responsible for ensuring that working remote does not conflict with essential in-person activities such as data collection and/or maintenance of ongoing experiments or plants. This includes identifying a colleague to water your plants while you are working remote.</li>
<li>Remote work is to be scheduled around field data collection and/or lab experiments, not the other way around.</li>
<li>If you are working from a different time zone, you are responsible for accommodating your work schedule around your Easter Timezone colleagues when necessary.</li>
</ul>
<h3 id="leave">Leave</h3>
<p>These guidelines are intended to cover logistics for planned time off (2+ days in duration).</p>
<h4 id="time-off-guidelines-for-full-time-rife-lab-members">Time Off Guidelines for Full-Time Rife Lab Members</h4>
<p>All full-time Rife Lab members are encouraged to take up to 15 days of vacation each year in addition to the 13 days of official University holiday (Martin Luther King Jr. Day, Memorial Day, Independence Day, Labor Day, Election Day, Thanksgiving (2 days), Winter break (6 days)).</p>
<ul>
<li>There is flexibility to our leave policy- contact Trevor to discuss extenuating circumstances.</li>
<li>You are responsible for ensuring that your time off does not conflict with essential research activities, field data collection, satisfactory progress towards mutually agreed upon project goals, or maintenance of ongoing experiments or plants.</li>
<li>There are no restrictions on time of year that vacation may be taken, but you are responsible for being aware and cognizant of internal/external deadlines, prior commitments, and field data collection in scheduling your time off. As a seasonally driven lab, sometimes the opportunity for data collection comes only once per year. If this applies to you/your project, please take this into account when scheduling time off.</li>
<li>Notify Trevor of your plans to take time off at least two weeks in advance.</li>
<li>You are not expected to provide a weekly update during a week where you are taking 3+ days off.
If you are taking 1 or 2 days off, plan to submit your update either before you leave or after you return.</li>
<li>There is no expectation for Slack replies during your vacation.</li>
<li>Urgent matters/emergencies will be addressed via phone calls. Only call a colleague who is on vacation if the matter is urgent and time sensitive. If you expect to be fully out of contact during your vacation, please designate someone able to make decisions on your behalf in event of emergency.</li>
</ul>
<h4 id="other-leave">Other Leave</h4>
<ul>
<li>If you are sick, you are encouraged to rest as much as needed. This does not count as vacation. This is being sick.</li>
<li>If you are on parental leave, this is not vacation. This is being on parental leave, and does not count towards your time off.</li>
<li>Religious observance counts towards vacation time. The Rife Lab closes for two weeks during the winter season beginning on the Winter Solstice (Dec 21). Time off for weekday religious holidays outside of this closure counts as time off.</li>
</ul>
<h2 class="page_break_before" id="other-policies">Other Policies</h2>
<h3 id="reproducible-research">Reproducible Research</h3>
<p>Reproducible research is an essential part of science, and an expectation for all projects in the lab.
Individuals unrelated to your research should be able to reproduce your results from your raw data and scripts.
Experimental design, analysis scripts, and pipelines should be well-documented and organized with extensive notes for each step.
An organized physical or electronic lab notebook is required to help document how and in what order activities were performed (pre-processing data, running models, statistical tests).
It is highly encouraged that you use version control (e.g., Git in combination with GitHub) to manage project development, facilitate long-term maintenance, and simplify code sharing.
The lab’s GitHub is https://github.com/RifeLab and new repositories can be created to host specific projects.</p>
<h3 id="deadlines">Deadlines</h3>
<p>Organization is vital to maintaining sanity in academia.
Disorganization and procrastination hurt you, your collaborators, and people whose help you need.
Collaborators should be notified as soon as a deadline is known.
It is appropriate and appreciated to remind collaborators (including Trevor) as deadlines get closer.</p>
<ul>
<li>One week: anything that doesn’t require a lot of time (e.g., reading/commenting on conference abstracts, filling out paperwork, etc).</li>
<li>Two weeks: anything with a hard deadline that requires a moderate amount of time (e.g., a letter of recommendation, manuscript submissions, revisions, etc.).</li>
<li>Three weeks: anything that requires multiple back-and-forth interactions between you and Trevor before a heard deadline (e.g., feedback on research and teaching statements)</li>
</ul>
<h3 id="recommendation-letters">Recommendation Letters</h3>
<p>Letters of recommendation are extremely important for getting new positions and grants.
With exceptions, I will generally only write letters if you have been in the lab for at least one year.
If you need a letter, notify me as soon as possible with the deadline, your CV, and relevant instructions for the content of the letter.
If the letter is for a grant, include your specific aims.
If the letter is for a faculty position, include your research and teaching statements.
In many cases, you may also be asked to submit a draft of a letter, which will be extensively modified, made more glamorous, and edited to add anything important that you left out.
While this process will likely feel awkward, it ensures that the letter contains all the information you need, and that it can be submitted on time.</p>
<h3 id="vehicles">Vehicles</h3>
<p>The Rife Lab is responsible for a state-owned Tahoe to be used to complete research and field activities.
In order to drive state vehicles, you are required to take an online training course.
The mileage log must be filled out whenever the Tahoe is used and turned in monthly.
Blank logs are available in the mail room.
For state vehicles, gas can be pumped on station.
There is a small receipt book kept near the gas tank where you can record your name, date, tag number, and number of gallons pumped.
If you have any questions about the gas key you should contact Sam.
The fuel card must be used for off-station fuel, along with a special PIN.
Contact Jenifer Lind if you believe you will need a PIN to get fuel.</p>
<h3 id="noise-policy">Noise Policy</h3>
<p>Ensuring that lab members get along and want to spend time with one another is a critical aspect to developing a productive, friendly, and positive lab environment.
But I also realize that you are all very busy and want to have a place to focus and work quietly.
While we do not have specific quiet time hours, please respect other people’s needs to work quietly in labs and offices.
If someone is wearing headphones, respect their desire for isolation (with obvious exceptions for emergencies).
If you required additional quiet or privacy for specific work or projects, feel free to work from home, a library, or anywhere else.</p>
<h3 id="old-projects">Old projects</h3>
<p>If a student or postdoc collects a dataset but does not completely analyze it or write it up within 2 years after the end of data collection, the project will be re-assigned to another person to expedite publication.
If a student or postdoc voluntarily relinquishes their rights to the project prior to the 2-year window, Trevor will also re-assign the project.
This policy ensures that data and results are published but ensures priority is given to the person who initially collected the data.</p>
<h3 id="ipopenness">IP/Openness</h3>
<p>Intellectual Property guidelines are handled in accordance with the instructions from our research sponsors and university guidance.
Lab members must follow the <a href="https://ci.clemson.edu/assets/docs/ip/archive/Student%20Participation%20Agreement%20-%20For%20Use%20in%20Sponsored%20Course%20Projects.pdf">Clemson Participation Agreement</a> and the agreements with our sponsors.
These often allow, encourage, or require openness.
If you have concerns at any point, set up a meeting with Trevor to discuss these concerns.</p>
<h3 id="file-naming">File Naming</h3>
<p>Files shared over Slack or Email should include dates in the name using the <code>YYYYMMDD</code> format.</p>
<h2 class="page_break_before" id="graduate-student-guidelines">Graduate Student Guidelines</h2>
<h3 id="academic-expectations">Academic expectations</h3>
<p>Graduate students in the lab will:</p>
<ul>
<li>Maintain a GPA of 3.0 or higher</li>
<li>Let Trevor know when coursework needs to take priority over research</li>
<li>Adhere to the highest standards of academic honesty</li>
</ul>
<p>In turn, Trevor will:</p>
<ul>
<li>Adjust expectations of time devoted to research based on the amount of academic work a lab member has at a given time</li>
<li>Provide guidance to lab members in strategically choosing coursework to meet long term educational goals</li>
</ul>
<h3 id="course-requirements">Course requirements</h3>
<p>PES does not have a required course list, however, your individual advisory committee may require specific courses for you.
Keep in mind that Graduate assistants are limited to 12 credits per semester.
The following requirements must be met through your planned course of study:</p>
<p><em>Masters:</em></p>
<ul>
<li>Minimum of 30 credits</li>
<li>At least half must be from courses numbered 8000 or above</li>
</ul>
<p><em>PhD:</em></p>
<ul>
<li>Minimum of 30 credits beyond a masters and 60 credits beyond a bachelors (total)</li>
<li>Minimum 12 credit hours of non-thesis coursework</li>
<li>Minimum 18 hours of dissertation research</li>
</ul>
<h3 id="graduate-advisory-committee">Graduate advisory committee</h3>
<p>Every graduate student is required to have a graduate committee made up of graduate faculty members, with at least half being from PES.
Masters students must have a minimum of three faculty members on their committee and the committee must be formed no later than the middle of their second semester.
PhD students are required to have a mimimum of four members, and their committee must be formed by the beginning of the fourth semester of their doctoral program.</p>
<h4 id="committee-meetings">Committee meetings</h4>
<p>Graduate students will interact with their advisory committees regularly.
Students should consult the graduate student handbook and/or correspond with the coordinator for their graduate program (<a href="https://www.clemson.edu/cafls/faculty_staff/profiles/schnabe">Guido Schnabel</a>) to understand the expectations that exist around communication with committee members.
Questions around what document(s) their committee will expect to see and when they should be sent to the committee should be resolved with the committee at least a month in advance of a scheduled meeting.
Students in the Rife Lab are not to provide food or drinks for committee members.</p>
<h3 id="comprehensive-examination">Comprehensive examination</h3>
<p>The comprehensive exam is designed to evaluate your overall mastery of a body of knowledge and skills after completing most of the program of study.
Satisfactory completion of the comprehensive examination must occur at least six months before graduation.
The advisory committee meets with the student and sets the details and rules for the examination.
Written examinations should be evaluated and returned to the student with appropriate comments before the oral examination.
The oral examination will include questions covering areas where weakness was demonstrated on the written examinations.
Oral exams typically last 2 to 3 hours.</p>
<h3 id="graduate-student-associations">Graduate student associations</h3>
<p>Both the PES department and the PDREC have active graduate student associations.
All graduate students are strongly encouraged to participate in these groups.</p>
<h3 id="pdrec-graduate-student-housing">PDREC graduate student housing</h3>
<p>If you are interested in staying in the graduate student housing at the PDREC, please contact both <a href="mailto:stepha2@CLEMSON.EDU">Mandy Stephan</a> and Trevor.</p>
<h3 id="references-1">References</h3>
<p>When in doubt about any specific policies, consult the <a href="https://www.clemson.edu/graduate/files/pdfs/policyhandbook_2022-23.pdf">graduate school policy handbook</a> and the <a href="https://www.clemson.edu/cafls/academics/graduate/files/graduate-handbook-plant-and-environmental-sciences-.pdf">PES graduate program handbook</a>.</p>
<ul>
<li><a href="https://www.clemson.edu/graduate/students/policies-procedures/index.html">Graduate school policies and proceedures</a></li>
<li><a href="https://catalog.clemson.edu/index.php">Clemson course catalog</a></li>
<li><a href="https://www.clemson.edu/graduate/students/forms.html">Graduate school forms</a></li>
<li><a href="https://www.clemson.edu/graduate/students/deadlines.html">Graduate school deadlines</a></li>
<li><a href="https://www.clemson.edu/graduate/students/theses-and-dissertations/index.html">Thesis submission guidelines</a></li>
<li><a href="https://www.clemson.edu/graduate/students/resources.html">Other Clemson resources</a></li>
</ul>
<h2 class="page_break_before" id="onboarding">Onboarding</h2>
<h3 id="accounts">Accounts</h3>
<p>CCIT provides several guides and information for <a href="https://ccit.clemson.edu/support/new-to-clemson/">incoming students</a> and <a href="https://ccit.clemson.edu/support/new-faculty-staff/">new faculty and staff</a>.
For the Rife Lab, members are expected to have accounts or sign up for the following:</p>
<ul>
<li><a href="https://slack.com">Advanced Plant Technology Program Slack</a></li>
<li><a href="https://github.com">GitHub</a></li>
<li><a href="https://clemson.box.com">Box</a></li>
<li>Lab Calendar</li>
<li>Office 365</li>
</ul>
<h4 id="slack">Slack</h4>
<p>The Rife lab uses the Advanced Plant Technology Slack Workspace as the primary tool for internal communication.
The best way to get in touch with Trevor is via a direct message in Slack.
Full-time lab members should install Slack on their computers and/or phones; part-time lab members should check Slack regularly.
Try to keep each channel on topic, so that people can subscribe only to the channels that concern them.
For messages to one person or a small group, use direct messages.
If you have to send messages that include out-of-lab recipients, use e-mail.
You should feel free to ignore Slack on evenings and weekends.</p>
<h4 id="onenote">OneNote</h4>
<p>The Rife Lab maintains a shared OneNote notebook.
Each lab member has a separate section that will be used to track weekly progress between meetings.
These sections are self-managed by lab members but are generally structured with each weekly meeting being a separate notebook page.
Each week before your individual meeting, you are expected to add a page to your section and document your progress during the last week, goals for the next week, and any questions related to your projects.
While much of the content of these pages will be text, images, graphs, and other media are often helpful to include.
If Trevor is unable to attend the individual meeting, he’ll annotate your page in red to give feedback.</p>
<h4 id="github">GitHub</h4>
<p>The Rife Lab uses <a href="https://github.com/rifelab">GitHub</a> to store and share code and data with the world.</p>
<h4 id="calendars">Calendars</h4>
<p>The lab has a shared calendars with activities relevant for the entire lab.
This calendar is used to keep track of lab events, lab meetings, travel schedules, and birthdays.</p>
<h4 id="box">Box</h4>
<p>The lab has a shared Box folder that is used to store large amounts of experimental data.
The lab Box is also used to store documents and files for general lab use.
Lab members have a subdirectory in the Rife Lab Box share that should be organized by project.</p>
<h3 id="website">Website</h3>
<p>New lab members are responsible for supplying Trevor with a photo and writing a blurb about themselves for the <a href="https://rifelab.org">lab website</a>.
These pages can be updated (or created) by members by forking the repository, making changes, and creating a pull request.</p>
<h3 id="computers">Computers</h3>
<p>Lab members are provided with a computer by request.
Please discuss your project’s computing needs with Trevor to best optimize resource usage.
For interns and undergraduate students, these machines may be shared.
For full time lab members, the operating system should be reinstalled when a new member joins.</p>
<h3 id="offices">Offices</h3>
<p>Lab members will be provided with the necessary hardware to complete their work.
You are responsible for letting Trevor know what you need, including uninterruptable power supplies, external monitors, peripherals, and office furniture (e.g., desk, chair, etc.)</p>
<h3 id="pee-dee-rec">Pee Dee REC</h3>
<h4 id="keys">Keys</h4>
<p>A key to the Pitner Center will be provided to each lab member.
If required, a key to the lab pesticide cage will also be provided.
It is the responsibility of each lab member to keep track of their keys for the security of everyone at the PDREC.
Do not share your keys or let anyone borrow them.</p>
<h4 id="gate-code">Gate Code</h4>
<p>Every PDREC employee is provided with a unique code to the front gate.
Do not share your gate code with anyone.
If you forget your gate code, talk to Mandy.
If you are hosting a visitor who will be arriving separately, let Mandy know when to expect them and either meet them at the gate or give them driving instructions to the front of the Pitner Center.</p>
<h4 id="work-orders">Work Orders</h4>
<p><a href="https://www.clemson.edu/cafls/peedee/employees/maintenance.html">Maintenance requests</a> and <a href="https://www.clemson.edu/cafls/peedee/employees/greenhouse.html">Greenhouse reqeusts</a> can be created by submitting a work order request form.
Discuss with Trevor before submitting to determine specifics for the request.
Mandy receives all of the request submissions and forwards them to the REC director and facilities lead (Sam Goodman).
Please keep this in mind when writing your request and ask nicely!</p>
<h2 class="page_break_before" id="meetings">Meetings</h2>
<h3 id="individual-meetings">Individual Meetings</h3>
<p>I attempt to meet individually with all lab members for about an hour each week.
The goal of the weekly meeting is to discuss research challenges and plan strategy.
Individual meetings can be in person or via Zoom–bring your computer if the meeting is in person.
You are responsible for updating OneNote prior to the meeting with what you accomplished over the last week and what tasks you aim to complete by the next week.
A product of the meeting is a list of what you want to do before the next meeting.
By default, I do not reschedule individual meetings due to scheduling conflicts, but I will annotate your OneNote page to answer any questions or provide insights.</p>
<h3 id="weekly-lab-meetings">Weekly Lab Meetings</h3>
<p>The Rife Lab holds a joint weekly lab meeting with the Hershberger Lab at PDREC.
Weekly lab meetings (~1 hour) are meant to be a forum for trainees to present project ideas and/or data to get feedback from the rest of the group.
Each lab member is expected to present at lab meeting at least once every semester.
These meetings are informal, and you can do what you wish with your slot – just be prepared to contribute something substantive.
Projects at any level of completion can benefit from being presented.
Lab meetings can also be used to talk about methods, statistical analyses, new papers, career development, or as an opportunity to prepare for conference presentations and give people feedback on job talks or other external presentations.
Lab members are expected to attend every meeting (barring excused absences due to illnesses, doctor appointments, family issues, etc.).</p>
<h3 id="weekly-developer-meetings">Weekly Developer Meetings</h3>
<p>The Rife Lab holds a weekly developer meeting (~1 hour).
These meetings serve as a forum to discuss upcoming changes to software being developed in the lab.
Developers are limited to 10m to discuss what they are working on, give quick demos, and solicit feedback from participants.
The second half of these meetings are an opportunity to provide support to external users or research groups that join the meeting.
All developers are expected to attend and participate in every meeting (barring excused absences due to illnesses, doctor appointments, family issues, etc.).</p>
<h3 id="journal-club">Journal Club</h3>
<p>Journal club is an opportunity for lab members to strengthen their ability to comprehend and critically analyze published research.
For these meetings, lab members are expected to read an assigned paper and attend with comments and questions about the reserach.
Let Trevor know if you have a specific topic or paper that you’re interested in discussing at lab meeting.</p>
<h2 class="page_break_before" id="purchasing">Purchasing</h2>
<h3 id="procedure">Procedure</h3>
<p>Requesting items for purchase in the Rife Lab is done via GitHub.
In the <code>Orders</code> repository, create an issue following the provided template.
Account numbers can be obtained in the <code>lab-info</code> repository.
Once the order is created, assign the issue to Trevor.
Trevor will attach a receipt to the issue once the item has been ordered.
You are responsible for closing the issue once the item has been received.</p>
<h3 id="clemson-guidelines">Clemson Guidelines</h3>
<p>If an order totals under $2,500, it may be purchased via PCard
If an order is over $2,500, it must be purchased via <a href="https://solutions.sciquest.com/apps/Router/Login?OrgName=Clemson&amp;tmstmp=1238434453337">Buyways</a>.
If over $10,000, multiple quotes must be obtained (unless it is a <a href="https://www.clemson.edu/procurement/faculty-staff/solesource.html">sole source</a> purchase).
Clemson is only tax exempt for agriculture-related purchases. Ask <a href="mailto:jenifel@clemson.edu">Jenifer Lind</a> for a agricultural tax exemption card if you will be making this type of purchase.
See the <a href="http://www.clemson.edu/procurement/faculty-staff/policies/">Clemson Procurement Guidelines</a> for more information.</p>
<h3 id="pcard">PCard</h3>
<p>PCard puchases must only be made for allowable items (<em>Notable expenses that are not allowable include hotels, meals, gas.</em>).
See the <a href="http://www.clemson.edu/procurement/faculty-staff/policies/index.html#pcardpolicy">PCard Policy</a> for a full breakdown of allowable purchases.
If you use the PCard for a purchase, you are responsible for getting the receipt to Trevor.
Failure to follow PCard guidelines may result in losing PCard privileges.</p>
<h3 id="other">Other</h3>
<p>Amazon is a common vendor used by the lab.
All Amazon purchases must be made by Trevor through the lab Amazon Business account.
The PCard cannot be used in non-business accounts and no personal Amazon accounts should be used for lab procurement.</p>
<p>The delivery address for PDREC is:</p>
<pre><code> Clemson Pee Dee Research &amp; Education Center
 2200 Pocket Rd
 Florence, SC  29506 </code></pre>
<h3 id="reimbursement">Reimbursement</h3>
<p>Purchases made on behalf of the lab can be reimbursed through <a href="https://www.concursolutions.com">Concur</a>.
Reimbursement requires proper documentation including the purchase receipt.
Purchases should not be made without prior approval.</p>
<h2 class="page_break_before" id="field-and-greenhouse">Field and Greenhouse</h2>
<h3 id="field-experiments">Field Experiments</h3>
<p>Experiments should be designed to be easily analyzed, control error, and give reasonable assurance that the differences between treatments will be detected.
For general breeding experiments, Trevor will provide a trial layout file one month before the planting date.
Reproducible R scripts (with set seeds) should be used to design your field experiments.
Write out the statistical model you will use to analyze your data when you are designing your experiment.
When in doubt, consult a statistician.</p>
<h4 id="land-requests">Land Requests</h4>
<p>Land use at the PDREC is allocated by the Land Use Committee, which includes the station Director, Farm Manager, and three resident faculty and/or extension associates.
If you need land for an experiment, let Trevor know as soon as possible.</p>
<p>Required details include:</p>
<ul>
<li>Field number (see the <a href="todo">PDREC field map</a>)</li>
<li>Portion of field needed</li>
<li>Project title</li>
<li>Project start and end dates (for the specific field trial)</li>
<li>Crop</li>
<li>Irrigation needed?</li>
</ul>
<p>Land use decisions are made at the beginning of the calendar year, so if we do not request land at that time, we cannot be guaranteed space.
Fields are assigned by the PDREC Land Use Committee.
Irrigated fields must be requested using the PDREC Land Use form approximately seven months before desired planting date.</p>
<h4 id="pdrec-farm-crew">PDREC Farm Crew</h4>
<p>The PDREC farm crew will assist individual projects with field preparation, planting, and maintenance.
The farm crew will help as needed, but <strong>do not expect the farm crew to perform data collection for you.</strong>
The farm crew works from ~7am-3pm ET, so plan accordingly if you need assistance with your field experiments.</p>
<h4 id="phenotyping">Phenotyping</h4>
<p>Decide on the phenotypes to capture as the experiment is being designed.
Use public ontologies to select traits and follow the methods described there to capture the phenotypes.
Do not create your own method unless you have double checked that existing methods do not meet your needs.
Be consistent with phenotyping methods within the lab and especially within a field trial.
Inconsistency can compromise the validity of your results.</p>
<p>We use <a href="https://play.google.com/store/apps/details?id=com.fieldbook.tracker">Field Book</a> for all phenotyping in the lab.
The lab will provide Android phones or tablets for data collection, but you are in charge of keeping track of your tablet and making sure it is charging when you leave for the day.
Do not collect phenotype notes on paper.
Consult the official <a href="https://docs.fieldbook.phenoapps.org/en/latest/field-book.html">Field book documentation</a> to learn about the app and various features available.
In most cases, date, numeric, boolean, and categorical trait types can capture the information needed but text traits should be avoided since they can be difficult to analyze.
If you find a bug in the app, report it by creating an issue on <a href="https://github.com/PhenoApps/Field-Book/issues">GitHub</a>.</p>
<h3 id="barcodes">Barcodes</h3>
<p>To increase throughput and minimize mistakes, barcodes are used throughout the breeding program in the Rife Lab.
Barcode labels can be prepared with Bartender software.
When preparing barcoded labels for your germplasm or plants, you should use one of the defined templates to ensure continuity in the lab.
These templates should not be edited by students or postdocs.
For field activities, two sets of labels should be printed: a poly one for stakes and a paper one for seed envelopes.</p>
<h3 id="greenhouse">Greenhouse</h3>
<p>You are responsible for taking care of your plants.
You must be trained before using the soil mixer.
<a href="mailto:jwindha@clemson.edu">Jonathan K Windham</a> is the greenhouse manager and should be contacted for greenhouse questions or clarifications.</p>
<h3 id="germplasm-storage">Germplasm Storage</h3>
<p>Germplasm is stored in the cooler in the field lab.
If you are performing an experiment and determine there is insufficinet source seed avaialable, contact Trevor and do not use all of the remaining seeds.
Keep the cooler door shut when not moving seed between rooms.</p>
<h2 class="page_break_before" id="coding">Coding</h2>
<p>All code from the lab should be well-documented and maintained under version control and will be shared along with data for all lab manuscripts.
All analyses should be entirely reproducible and well-documented in the form of makefiles, shell scripts, or other automation approaches that allow analyses to be automatically performed.
These scripts, including those to generate figures will be included in repositories (see “Getting Code into RifeLab Repositories”) and made publicly available with a preprint or manuscript submission.
Depending on the application, we write code Kotlin, Java, R, or Python; code for visualization should be in be Python or R.</p>
<h3 id="version-control">Version Control</h3>
<p>Our primary version control service is GitHub, and we have an organization called <a href="https://github.com/RifeLab"><code>RifeLab</code></a> there.
Lab members are expected to maintain their code in repositories within the RifeLab organization.
When you join the lab, a repo with your name will be created and used as long-term storage for your research outputs.
Project-specific repositories should be created to organize project files, simplify the process of reproducibility, and serve as a means of publishing analyses.
Contributions to project respositories should be made using pull requests to facilitate code review (see below).</p>
<h4 id="creating-a-rifelab-project-repository">Creating a RifeLab Project Repository</h4>
<ol type="1">
<li>Create a repository within the organization.</li>
<li>Fork this repository into one under your user account.</li>
<li>Make commits to your own repository, and move code back to the <code>RifeLab</code> repository through pull requests (see below).</li>
</ol>
<h4 id="getting-code-into-rifelab-repositories">Getting Code into RifeLab Repositories</h4>
<p>Code moves from user repositories to <code>RifeLab</code> repositories through a process of code review that is handled through pull requests.
The process is described briefly below.
Feel free to ask for guidance if you are uncomfortable with the process.
<strong>We will revoke write access for failing to adhere to these rules.</strong></p>
<ol type="1">
<li>Make local changes to your code and commit them to your repository.</li>
<li>Create a pull request into the repository owned by <code>RifeLab</code>.</li>
<li>Name potential reviewers for your pull request.</li>
<li>Once at least one lab member has approved your pull request, your pull request can be merged. The only exception to this policy is this repository (<code>lab-manual</code>) where, in addition to the above rules, Trevor must also approve the pull request.</li>
</ol>
<h4 id="composition-of-pull-requests">Composition of Pull Requests</h4>
<p>Each pull request may contain one or more changesets.
In keeping with good source control practice, each changeset or commit should contain <em>all</em> changes necessary for a particular fix or update.
In addition, each pull request should relate to no more than one functional area in the code base you are updating.
Keeping the pull request focused to one area makes it easier for your reviewers to provide thoughtful feedback.</p>
<h4 id="reviewing-pull-requests">Reviewing Pull Requests</h4>
<p>All lab members are expected to participate in code review when it matches your expertise.
If you get named by the submitter, it’s courteous to review the request.
A checklist is available to help facilitate and guide code review.
As a reviewer, you are responsible for making sure that all checklist guidelines are followed.</p>
<h4 id="failed-projects">Failed Projects</h4>
<p>Some repositories will contain project failures (e.g. proof-of-concepts that didn’t work).
This is ideal.
Being able to find them will make sure we don’t make the same failure twice.</p>
<h4 id="non-code-versioning">Non-Code Versioning</h4>
<p>Non-code documents should be kept in a place that maintains version history.
Clemson provides <a href="https://clemson.box.com/">Box</a> for these purposes.</p>
<h3 id="licensing">Licensing</h3>
<p>We release as many research outputs as possible under permissive open licenses to ensure our research is reusable and reproducible with minimal legal barriers.
The default license for software that should be applied to new lab related repositories is the <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">GPL 3</a>.
In certain cases, a funding agency or other upstream restrictions may require alternative licensing.</p>
<h3 id="commenting-code">Commenting Code</h3>
<p>All code written by lab members should be appropriately commented to ensure others can understand the functionality and help when debugging issues.</p>
<p><a href="https://stackoverflow.blog/2021/07/05/best-practices-for-writing-code-comments/">Rules for commenting scripts</a>:</p>
<ol type="1">
<li>Comments should not duplicate the code.</li>
<li>Good comments do not excuse unclear code.</li>
<li>If you can’t write a clear comment, there may be a problem with the code.</li>
<li>Comments should dispel confusion, not cause it.</li>
<li>Explain unidiomatic code in comments.</li>
<li>Provide links to the original source of copied code.</li>
<li>Include links to external references where they will be most helpful.</li>
<li>Add comments when fixing bugs.</li>
<li>Use comments to mark incomplete implementations.</li>
</ol>
<h2 class="page_break_before" id="data-management">Data Management</h2>
<p>Data management is the process of collecting, storing, organizing, and maintaining data in a structured and systematic manner to ensure its availability, accuracy, and usability.
The Rife Lab strives to organize and store data efficiently and effectively to maximize utility.
Members of the Rife Lab involved in data collected should implement principles of the Data Lifecycle.</p>
<h3 id="the-data-lifecycle">The Data Lifecycle</h3>
<ol type="1">
<li><a href="#plan">Plan</a></li>
<li><a href="#Collect">Collect</a></li>
<li><a href="#Process">Process</a></li>
<li><a href="#Analyze">Analyze</a></li>
<li><a href="#Preseve">Preserve</a></li>
<li><a href="#Share">Share</a></li>
<li><a href="#Reuse">Reuse</a></li>
</ol>
<h4 id="plan">Plan</h4>
<p>A Data Management Plan is a formal document outlining how data will be handled during and after research.
It is often required for grant proposals, and is helpful to consider when starting a project to ensure you have the ability to manage all data types that will be collected.
A good DMP will include considerations for data types, collection methods, data formats, how the data will be used, how the data will be shared, and expected data volume.</p>
<h4 id="collect">Collect</h4>
<p>Collection method directly impacts impacts the data format, accuracy, and collection throughput.
Data should be machine readible to simplify analysis including using flat files with plain text, descriptive headers, limited spaces and special characters, and consistent data types.
Capturing metadata facilitates reuse and provenance and helps make the data meaningful.</p>
<h4 id="process">Process</h4>
<p>A copy of raw data should always be maintained in an unmodified state.
All changes to a dataset via scripting should be recorded via version control (Git).
Modified data files should be saved under a new name (don’t overwrite the original).
Outlier removal should be standardized, reproducible, and statistically justified.</p>
<h4 id="analysis">Analysis</h4>
<p>Your analysis should be entirely reproducible by independent scientists outside of the lab.
A consistent scripting language should be coupled with comprehensive documentation (e.g., code comments, a repo readme, software versions used, etc.).
Reproducibility increases transparency and credibility and helps you remember what you did when it comes time to write and publish your projects.
R markdown, Quarto, and Jupyter Notebook are all great tools to help make your analysis documentation easier.
They allow for a mix of text and code and output nice PDF or HTML documents.</p>
<h4 id="preservation">Preservation</h4>
<p>Data is often irreplaceable and efforts should be made to ensure it doesn’t become inaccessible or lost.
Raw data should be stored in non-proprietary, future-proof file formats when possible.
Full-time employees should regularly back up their computers on an external drive, preferably through an automated backup program.
Raw data should include a README file that includes all necessary guides and metadata necessary to understand and utilize the data.
Files should be organized using a consistent and logical directory structure.
Project management such as the R package <a href="https://workflowr.github.io/workflowr/"><code>workflowr</code></a> can be used to create a backbone directory structure automatically.
In the Rife Lab, scripts scripts and small data sets should be stored in project-specific repositories on GitHub.
Large datasets should be stored on the lab NAS server or in the lab Box directory.</p>
<h3 id="share">Share</h3>
<p><strong>ALWAYS CHECK WITH TREVOR BEFORE SHARING DATA!</strong>
Open science is an approach to conducting scientific research that emphasizes transparency, accessibility, collaboration, reproducibility, and inclusivity.
The Rife lab supports open science and is committed to publishing preprints and making all data and code public upon publication.
Sharing data requires understanding who is responsible for the data and has the right to make decisions about access.
Unless told otherwise, data can be shared within the research group without explicit permission.
Prior to publication, data may be shared among collaborators giving them access, often with the understanding that they will allow the data creator to lead the publication effort.
Copyright is typically held by the creator of the data.
Licenses specify how data can be used, shared, and redistributed and can be applied to data, code, and written word.
Data should always be shared according to funding agency requirements.
It is Trevor’s responsibility to make the final decision regarding data sharing.</p>
<h3 id="reuse">Reuse</h3>
<p>The FAIR principles are a set of guidelines to help improve the <strong>F</strong>inability, <strong>A</strong>ccessibiliy, <strong>I</strong>nteroperability, and <strong>R</strong>euse of digital assets <a href="http://www.nature.com/articles/sdata201618">(Wilkinson et al., 2016)</a>.
As a member of the Rife Lab, you are expected to familiarize yourself with these principles via the <a href="https://www.go-fair.org">FAIR website</a> and put them into practice.</p>
<h3 id="references-2">References</h3>
<ul>
<li><a href="https://dmptool.org">DMP Tool</a></li>
<li><a href="https://doi.org/10.1371/journal.pcbi.1004525">Ten simple rules for creating a good data management plan</a></li>
<li><a href="https://doi.org/10.1890/0012-9623-90.2.205">Some Simple Guidelines for Effective Data Management</a></li>
<li><a href="https://www.clemson.edu/research/division-of-research/offices/orc/rcr/index.html">Clemson RCR</a></li>
<li><a href="/extras/learning_git.md">Learning git and GitHub</a></li>
<li><a href="https://www.phenoapps.org">Phenapps</a></li>
<li><a href="https://doi.org/10.1371/journal.pcbi.1003285">Ten simple rules for reproducible computational research</a></li>
<li><a href="https://doi.org/10.1890/0012-9623-90.2.205">Some Simple Guidelines for Effective Data Management</a></li>
<li><a href="https://jhuadvdatasci.substack.com/p/jhu-ads-2020-week-3-organizing-a">Organizing a data analysis</a></li>
<li><a href="https://ufal.github.io/public-license-selector/">License selector tool</a></li>
<li><a href="https://slideplayer.com/slide/12980668/">Data management lecture</a></li>
</ul>
<h2 class="page_break_before" id="writing">Writing</h2>
<p>Written communication skills are one of the most important skills in academia.
Graduate students and postdocs are expected to draft their own manuscripts and work with Trevor to make iterative revisions.
In the Rife Lab, <strong>a citation manager is required</strong> for all manuscripts.
Examples of citation managers include Zotero (preferred), Mendeley, Endnote, Paperpile, etc.</p>
<h3 id="naming-and-formatting">Naming and Formatting</h3>
<p>When naming offline files to send to Trevor or external collaboratorss, include your name and a date in the filename (e.g., <code>hersh_cv_20240917.docx</code>).
I will generally append my initials to file names after making comments (e.g., <code>hersh_cv_20240917_twr</code>).
Once you have incorporated changes, the file can be renamed with the current date before sending for comment.</p>
<p>Draft manuscripts are required to have the following:</p>
<ul>
<li>Line and page numbers</li>
<li>Full author list to help clarify any authorship issues or concerns</li>
<li>Placeholders for all sections (i.e., introduction, methods, results, discussion, etc.) even if they are empty</li>
<li>Styles, especially for headings, to help organization and simplify formatting</li>
<li>Figures in the body of the manuscript</li>
</ul>
<p>Any of the above formatting can be modified prior to journal submission, but these formatting guidelines should be followed to facilitate consistent internal formatting and simplify revisions.</p>
<h3 id="content">Content</h3>
<p>Draft manuscripts should be free of most spelling and grammatical errors–especially prior to sending out to collaborators.
Scientific manuscripts should generally be written entirely in the past tense.
Lab members are available to help proofread and explain why certain words or phrases should be used.
Reading manuscripts out loud to yourself is a good approach to catch sentences with missing words, grammatical mistakes, or sentences with subject-verb disagreement.
Manuscripts with copious amounts of grammatical errors or sloppy writing may be returned to you without being reviewed.</p>
<p>When writing, do your best to use clear and concise language and structure that is easy to read:</p>
<ul>
<li>You never have to write “in this study”.</li>
<li>“Figure 1 shows the relationship between A and B. This relationship is linear.” VS. “The relationship between A and B is linear (Fig. 1).”</li>
<li>“Past research (Einstein, 1905) showed that space and time are linked.” VS. “Space and time are linked (Einstein, 1905).”</li>
<li>If you do not use an abbreviation in your manuscript, do not define it.</li>
<li>Avoid using adjectives that make a result seem more important or extreme. “Assessing wheat baking quality is very expensive” VS. “Assessing wheat baking quality is expensive”</li>
<li>Ensure the words you use are unambigious (e.g., “bimonthly” is defined as occurring twice a month or every two months)</li>
<li>Ensure the subject of a sentence is clear. “This will require method development” VS. “This new rule will require method development”</li>
<li>Do not start sentences with abbreviations</li>
</ul>
<h3 id="figures">Figures</h3>
<p>Once we have determined the structure for a figure, work to make it as polished as possible before sending to me for review so that I can provide comprehensive and helpful feedback.
If you give me something unfinished, I will likely tell you things you already know.
Figures should be entirely reproducible from code and should generally be saved as vector files (PDF or EPS).
EPS files can be modified in Adobe Illustrator or other image-editing program.
I will not review or publish figures made in Microsoft Excel.</p>
<h3 id="submissions">Submissions</h3>
<p>Manuscripts from the Rife Lab will be preferentially submitted to pre-print servers and published in open access journals.
You are required to send a manuscript to all authors at least two weeks before submitting it to give them an opportunity to comment. Page proofs should be reviewed carefully for mistakes (especially references).</p>
<h3 id="authorship">Authorship</h3>
<p>Our lab follows the <a href="https://media.clemson.edu/research/orc/rcr/rcr-authorship.pdf">Clemson Authorship Policy</a>.
Many journals now require the assignment of <a href="https://credit.niso.org">CRediT</a> roles to each author (Conceptualization; Data curation, Formal Analysis, Funding acquisition, Investigation, Methodology, Project administration, Resources, Software, Supervision, Validation, Visualization, Writing – original draft, Writing – review &amp; editing).
Since projects evolve over time and authorship inclusion and order are re-evaluated accordingly, it is good practice to assign these roles to each author of manuscripts you lead.
If you feel that your contributions to another’s work merit authorship but you have not been included as an author, please discuss this with Trevor.</p>
<h3 id="references-3">References</h3>
<ul>
<li><a href="https://www.science.org/content/article/how-write-research-paper">10 rules for writing a paper</a></li>
<li>Writing Science, by Joshua Schimel</li>
<li><a href="http://www2.stat.duke.edu/~rcs46/lectures_2015/01-markdown-git/slides/naming-slides/naming-slides.pdf">File naming guidelines</a></li>
</ul>
<h2 class="page_break_before" id="reading">Reading</h2>
<p>Existing literature provides the foundational knowledge and theoretical framework necessary for our current work and can be used to identify gaps in what has been done previously or inspire new research questions.
Keeping up with published literature, allows us to build on the past without unnecessary repetition and continue to move the field forward.
Papers can also be a great source of protocols, code, and data that can be used to design experiments and frame analyses.
They may also cite other relevant work that you can find and read to help further understand concepts.</p>
<h3 id="obtaining-papers">Obtaining Papers</h3>
<p>Manuscripts may be hidden behind a paywall, but don’t let this stop you from reading them.
<a href="https://pascal-clemson.primo.exlibrisgroup.com/discovery/search?vid=01PASCAL_CLEM:CLEMSON&amp;lang=en">Clemson University libraries</a> subscribe to many scientific journals and are often able to obtain specific articles outside of those subscriptions through Inter-Library Loan services. <a href="https://scholar.google.com">Google Scholar</a>, <a href="https://pubmed.ncbi.nlm.nih.gov">PubMed</a>, and <a href="https://www.researchgate.net">ResearchGate</a> often have alternative links to get the full text of an article or authors may have manually uploaded their full text. If all else fails, corresponding authors are nearly always willing to send a copy of their articles when direcly asked.</p>
<h3 id="organizing-files">Organizing files</h3>
<p>Before you start reading, obtain a PDF reader and citation management software.
Organizing your papers as you find and read them will make it substantially easier to find them later when you need to use them as references.
Clemson provides <a href="https://ccit.clemson.edu/support/current-students/software-and-applications/adobe/">Adobe Acrobat</a> for free to students, staff, and faculty.
<a href="https://www.zotero.org">Zotero</a> is a free, open-source citation manager and PDF reader that is useful for organizing, annotating, and citing papers.</p>
<h3 id="reading-a-paper">Reading a paper</h3>
<p>When you’re organized and ready to read, start with the abstract, which provides a summary of what was done and the results and conclusions from the work.
From here, your reading strategy may change depending on your goals. Typically, the figures are a good place to start.
<a href="https://doi.org/10.1371/journal.pcbi.1008032">Ten simple rules for reading a scientific paper</a> is a good resource for optimizing your time spent reading and efficiently navigating scientific papers.</p>
<h2 class="page_break_before" id="conferences-presentations-and-travel">Conferences, Presentations, and Travel</h2>
<h3 id="conferences">Conferences</h3>
<p>All lab members are encouraged to attend at least one conference per year to present a poster or talk related to research being performed in the Rife Lab.
Travel grants are often available through multiple sources including the department, university, or organizing conference and lab members are expected to apply for these opportunities to help cover travel expenses.
Members of the lab regularly attend the ACS Tri-Society Meeting, Plant and Animal Genome Conference, and the National Association of Plant Breeding Annual Meeting.
Lab members can attend other conferences that are topical to your research projects and align with the supporting grants.
Members who are invited to conferences or other meetings with their costs covered are welcome to accept such invitations.</p>
<h3 id="abstracts">Abstracts</h3>
<p>Anyone planning to submit an abstract for a conference, symposium, etc. must first clear this with Trevor and circulate the abstract to all authors at least one week before the submission deadline. <strong>Failure to meet this deadline will result in you not attending the event.</strong></p>
<h3 id="presentations">Presentations</h3>
<p>Scientific career progression is heavily dependent on your ability to effectively present your research.
It is therefore highly encouraged that you seek opportunities to regularly present your research, whether it is at a departmental level, to other labs (within or outside of Clemson), at conferences, or to the general public.
Every time you present your work, you are representing the entire lab.
Practice talks will help you feel comfortable with your presentation and allow you to get direct feedback from the lab.
If you are going to give a presentation, be prepared to give a practice presentation to the lab prior to your real presentation (at least one week for posters, two weeks for conference presentations, and four weeks for job talks).</p>
<h4 id="posters">Posters</h4>
<p>Posters must be circulated to all authors at least one week before the printing deadline.
Templates for posters will be available, and you can use those as much or as little as you’d like.
Some general rules for posters should be followed: minimize text as much as possible, make figures and text large and easy to see at a distance, label your axes, and make sure different colors are easily discriminable.
Make sure to double and triple check that your dimensions match the requested size and orientation for your event (especially orientation!).</p>
<h4 id="oral-presentations">Oral Presentations</h4>
<p>For oral presentations, watching online seminars from scientists in the field is a good way to refine your presentation style and content.
Trevor is happy to share slides from some of his talks if you would like to use a similar style.
As with posters, feel free to go with your own style as long as it is polished and clear.
Internal practice talks should use your final slides and be near the right length to ensure feedback is as helpful as possible.</p>
<h3 id="travel">Travel</h3>
<p>All work-related travel must adhere to the <a href="https://www.clemson.edu/procurement/concurtravel/index.html">Clemson travel guidelines</a>, the <a href="https://clemsonpub.cfmnetwork.com/B.aspx?BookId=11116&amp;PageId=456901">Clemson Travel Procedure</a>, and the <a href="https://clemsonpub.cfmnetwork.com/B.aspx?BookId=11123&amp;PageId=456919">Clemson Travel Policy</a>.
All overnight travel requires university pre-approval through a travel request.
Reimbursements for university-related travel are made entirely through <a href="https://www.concursolutions.com">Concur</a>.
Per diem follows the GSA rates and can be found <a href="https://www.gsa.gov/travel/plan-book/per-diem-rates">here</a>.
To add per diem to your travel request, choose the “Travel Allowance” option.</p>
<h2 class="page_break_before" id="references-4">References</h2>
<!-- Explicitly insert bibliography here -->
<div id="refs" role="doc-bibliography">

</div>
<!-- default theme -->

<style>
  /* import google fonts */
  @import url("https://fonts.googleapis.com/css?family=Open+Sans:400,600,700");
  @import url("https://fonts.googleapis.com/css?family=Source+Code+Pro");

  /* -------------------------------------------------- */
  /* global */
  /* -------------------------------------------------- */

  /* all elements */
  * {
    /* force sans-serif font unless specified otherwise */
    font-family: "Open Sans", "Helvetica", sans-serif;

    /* prevent text inflation on some mobile browsers */
    -webkit-text-size-adjust: none !important;
    -moz-text-size-adjust: none !important;
    -o-text-size-adjust: none !important;
    text-size-adjust: none !important;
  }

  @media only screen {
    /* "page" element */
    body {
      position: relative;
      box-sizing: border-box;
      font-size: 12pt;
      line-height: 1.5;
      max-width: 8.5in;
      margin: 20px auto;
      padding: 40px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* "page" element */
    body {
      padding: 20px;
      margin: 0;
      border-radius: 0;
      border: none;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05) inset;
      background: none;
    }
  }

  /* -------------------------------------------------- */
  /* headings */
  /* -------------------------------------------------- */

  /* all headings */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 20px 0;
    padding: 0;
    font-weight: bold;
  }

  /* biggest heading */
  h1 {
    margin: 40px 0;
    text-align: center;
  }

  /* second biggest heading */
  h2 {
    margin-top: 30px;
    padding-bottom: 5px;
    border-bottom: solid 1px #bdbdbd;
  }

  /* heading font sizes */
  h1 {
    font-size: 2em;
  }
  h2 {
    font-size: 1.5em;
  }
  h3 {
    font-size: 1.35em;
  }
  h4 {
    font-size: 1.25em;
  }
  h5 {
    font-size: 1.15em;
  }
  h6 {
    font-size: 1em;
  }

  /* -------------------------------------------------- */
  /* manuscript header */
  /* -------------------------------------------------- */

  /* manuscript title */
  header > h1 {
    margin: 0;
  }

  /* manuscript title caption text (ie "automatically generated on") */
  header + p {
    text-align: center;
    margin-top: 10px;
  }

  /* -------------------------------------------------- */
  /* text elements */
  /* -------------------------------------------------- */

  /* links */
  a {
    color: #2196f3;
    overflow-wrap: break-word;
  }

  /* superscripts and subscripts */
  sub,
  sup {
    /* prevent from affecting line height */
    line-height: 0;
  }

  /* unordered and ordered lists*/
  ul,
  ol {
    padding-left: 20px;
  }

  /* class for styling text semibold */
  .semibold {
    font-weight: 600;
  }

  /* class for styling elements horizontally left aligned */
  .left {
    display: block;
    text-align: left;
    margin-left: auto;
    margin-right: 0;
    justify-content: left;
  }

  /* class for styling elements horizontally centered */
  .center {
    display: block;
    text-align: center;
    margin-left: auto;
    margin-right: auto;
    justify-content: center;
  }

  /* class for styling elements horizontally right aligned */
  .right {
    display: block;
    text-align: right;
    margin-left: 0;
    margin-right: auto;
    justify-content: right;
  }

  /* -------------------------------------------------- */
  /* section elements */
  /* -------------------------------------------------- */

  /* horizontal divider line */
  hr {
    border: none;
    height: 1px;
    background: #bdbdbd;
  }

  /* paragraphs, horizontal dividers, figures, tables, code */
  p,
  hr,
  figure,
  table,
  pre {
    /* treat all as "paragraphs", with consistent vertical margins */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* figures */
  /* -------------------------------------------------- */

  /* figure */
  figure {
    max-width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure caption */
  figcaption {
    padding: 0;
    padding-top: 10px;
  }

  /* figure image element */
  figure > img,
  figure > svg {
    max-width: 100%;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* figure auto-number */
  img + figcaption > span:first-of-type,
  svg + figcaption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* tables */
  /* -------------------------------------------------- */

  /* table */
  table {
    border-collapse: collapse;
    border-spacing: 0;
    width: 100%;
    margin-left: auto;
    margin-right: auto;
  }

  /* table cells */
  th,
  td {
    border: solid 1px #bdbdbd;
    padding: 10px;
    /* squash table if too wide for page by forcing line breaks */
    overflow-wrap: break-word;
    word-break: break-word;
  }

  /* header row and even rows */
  th,
  tr:nth-child(2n) {
    background-color: #fafafa;
  }

  /* odd rows */
  tr:nth-child(2n + 1) {
    background-color: #ffffff;
  }

  /* table caption */
  caption {
    text-align: left;
    padding: 0;
    padding-bottom: 10px;
  }

  /* table auto-number */
  table > caption > span:first-of-type {
    font-weight: bold;
    margin-right: 5px;
  }

  /* -------------------------------------------------- */
  /* code */
  /* -------------------------------------------------- */

  /* multi-line code block */
  pre {
    padding: 10px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
    break-inside: avoid;
    text-align: left;
  }

  /* inline code, ie code within normal text */
  :not(pre) > code {
    padding: 0 4px;
    background-color: #eeeeee;
    color: #000000;
    border-radius: 5px;
  }

  /* code text */
  /* apply all children, to reach syntax highlighting sub-elements */
  code,
  code * {
    /* force monospace font */
    font-family: "Source Code Pro", "Courier New", monospace;
  }

  /* -------------------------------------------------- */
  /* quotes */
  /* -------------------------------------------------- */

  /* quoted text */
  blockquote {
    margin: 0;
    padding: 0;
    border-left: 4px solid #bdbdbd;
    padding-left: 16px;
    break-inside: avoid;
  }

  /* -------------------------------------------------- */
  /* banners */
  /* -------------------------------------------------- */

  /* info banners */
  .banner {
    box-sizing: border-box;
    display: block;
    position: relative;
    width: 100%;
    margin-top: 20px;
    margin-bottom: 20px;
    padding: 20px;
    text-align: center;
  }

  /* paragraph in banner */
  .banner > p {
    margin: 0;
  }

  /* -------------------------------------------------- */
  /* highlight colors */
  /* -------------------------------------------------- */

  .white {
    background: #ffffff;
  }
  .lightgrey {
    background: #eeeeee;
  }
  .grey {
    background: #757575;
  }
  .darkgrey {
    background: #424242;
  }
  .black {
    background: #000000;
  }
  .lightred {
    background: #ffcdd2;
  }
  .lightyellow {
    background: #ffecb3;
  }
  .lightgreen {
    background: #dcedc8;
  }
  .lightblue {
    background: #e3f2fd;
  }
  .lightpurple {
    background: #f3e5f5;
  }
  .red {
    background: #f44336;
  }
  .orange {
    background: #ff9800;
  }
  .yellow {
    background: #ffeb3b;
  }
  .green {
    background: #4caf50;
  }
  .blue {
    background: #2196f3;
  }
  .purple {
    background: #9c27b0;
  }
  .white,
  .lightgrey,
  .lightred,
  .lightyellow,
  .lightgreen,
  .lightblue,
  .lightpurple,
  .orange,
  .yellow,
  .white a,
  .lightgrey a,
  .lightred a,
  .lightyellow a,
  .lightgreen a,
  .lightblue a,
  .lightpurple a,
  .orange a,
  .yellow a {
    color: #000000;
  }
  .grey,
  .darkgrey,
  .black,
  .red,
  .green,
  .blue,
  .purple,
  .grey a,
  .darkgrey a,
  .black a,
  .red a,
  .green a,
  .blue a,
  .purple a {
    color: #ffffff;
  }

  /* -------------------------------------------------- */
  /* buttons */
  /* -------------------------------------------------- */

  /* class for styling links like buttons */
  .button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    margin: 5px;
    padding: 10px 20px;
    font-size: 0.75em;
    font-weight: 600;
    text-transform: uppercase;
    text-decoration: none;
    letter-spacing: 1px;
    background: none;
    color: #2196f3;
    border: solid 1px #bdbdbd;
    border-radius: 5px;
  }

  /* buttons when hovered */
  .button:hover:not([disabled]),
  .icon_button:hover:not([disabled]) {
    cursor: pointer;
    background: #f5f5f5;
  }

  /* buttons when disabled */
  .button[disabled],
  .icon_button[disabled] {
    opacity: 0.35;
    pointer-events: none;
  }

  /* class for styling buttons containg only single icon */
  .icon_button {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    text-decoration: none;
    margin: 0;
    padding: 0;
    background: none;
    border-radius: 5px;
    border: none;
    width: 20px;
    height: 20px;
    min-width: 20px;
    min-height: 20px;
  }

  /* icon button inner svg image */
  .icon_button > svg {
    height: 16px;
  }

  /* -------------------------------------------------- */
  /* icons */
  /* -------------------------------------------------- */

  /* class for styling icons inline with text */
  .inline_icon {
    height: 1em;
    position: relative;
    top: 0.125em;
  }

  /* -------------------------------------------------- */
  /* references */
  /* -------------------------------------------------- */

  .csl-entry {
    margin-top: 15px;
    margin-bottom: 15px;
  }

  /* -------------------------------------------------- */
  /* print control */
  /* -------------------------------------------------- */

  @media print {
    @page {
      /* suggested printing margin */
      margin: 0.5in;
    }

    /* document and "page" elements */
    html,
    body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }

    /* "page" element */
    body {
      font-size: 11pt !important;
      line-height: 1.35;
    }

    /* all headings */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      margin: 15px 0;
    }

    /* figures and tables */
    figure,
    table {
      font-size: 0.85em;
    }

    /* table cells */
    th,
    td {
      padding: 5px;
    }

    /* shrink font awesome icons */
    i.fas,
    i.fab,
    i.far,
    i.fal {
      transform: scale(0.85);
    }

    /* decrease banner margins */
    .banner {
      margin-top: 15px;
      margin-bottom: 15px;
      padding: 15px;
    }

    /* class for centering an element vertically on its own page */
    .page_center {
      margin: auto;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      vertical-align: middle;
      break-before: page;
      break-after: page;
    }

    /* always insert a page break before the element */
    .page_break_before {
      break-before: page;
    }

    /* always insert a page break after the element */
    .page_break_after {
      break-after: page;
    }

    /* avoid page break before the element */
    .page_break_before_avoid {
      break-before: avoid;
    }

    /* avoid page break after the element */
    .page_break_after_avoid {
      break-after: avoid;
    }

    /* avoid page break inside the element */
    .page_break_inside_avoid {
      break-inside: avoid;
    }
  }

  /* -------------------------------------------------- */
  /* override pandoc css quirks */
  /* -------------------------------------------------- */

  .sourceCode {
    /* prevent unsightly overflow in wide code blocks */
    overflow: auto !important;
  }

  div.sourceCode {
    /* prevent background fill on top-most code block  container */
    background: none !important;
  }

  .sourceCode * {
    /* force consistent line spacing */
    line-height: 1.5 !important;
  }

  div.sourceCode {
    /* style code block margins same as <pre> element */
    margin-top: 20px;
    margin-bottom: 20px;
  }

  /* -------------------------------------------------- */
  /* tablenos */
  /* -------------------------------------------------- */

  /* tablenos wrapper */
  .tablenos {
    width: 100%;
    margin: 20px 0;
  }

  .tablenos > table {
    /* move margins from table to table_wrapper to allow margin collapsing */
    margin: 0;
  }

  @media only screen {
    /* tablenos wrapper */
    .tablenos {
      /* show scrollbar on tables if necessary to prevent overflow */
      overflow-x: auto !important;
    }

    .tablenos th,
    .tablenos td {
      overflow-wrap: unset !important;
      word-break: unset !important;
    }

    /* table in wrapper */
    .tablenos table,
    .tablenos table * {
      /* don't break table words */
      overflow-wrap: normal !important;
    }
  }
</style>
<!-- 
    Plugin Core

    Functions needed for and shared across all first-party plugins.
-->

<script>
  // get element that is target of hash (from link element or url)
  function getHashTarget(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector(`[id="${id}"]`);
    if (!target) return;

    // if figure or table, modify target to get expected element
    if (id.indexOf("fig:") === 0) target = target.querySelector("figure");
    if (id.indexOf("tbl:") === 0) target = target.querySelector("table");

    return target;
  }

  // get position/dimensions of element or viewport
  function getRectInView(element) {
    let rect = {};
    rect.left = 0;
    rect.top = 0;
    rect.right = document.documentElement.clientWidth;
    rect.bottom = document.documentElement.clientHeight;
    let style = {};

    if (element instanceof HTMLElement) {
      rect = element.getBoundingClientRect();
      style = window.getComputedStyle(element);
    }

    const margin = {};
    margin.left = parseFloat(style.marginLeftWidth) || 0;
    margin.top = parseFloat(style.marginTopWidth) || 0;
    margin.right = parseFloat(style.marginRightWidth) || 0;
    margin.bottom = parseFloat(style.marginBottomWidth) || 0;

    const border = {};
    border.left = parseFloat(style.borderLeftWidth) || 0;
    border.top = parseFloat(style.borderTopWidth) || 0;
    border.right = parseFloat(style.borderRightWidth) || 0;
    border.bottom = parseFloat(style.borderBottomWidth) || 0;

    const newRect = {};
    newRect.left = rect.left + margin.left + border.left;
    newRect.top = rect.top + margin.top + border.top;
    newRect.right = rect.right + margin.right + border.right;
    newRect.bottom = rect.bottom + margin.bottom + border.bottom;
    newRect.width = newRect.right - newRect.left;
    newRect.height = newRect.bottom - newRect.top;

    return newRect;
  }

  // get position of element relative to page
  function getRectInPage(element) {
    const rect = getRectInView(element);
    const body = getRectInView(document.body);

    const newRect = {};
    newRect.left = rect.left - body.left;
    newRect.top = rect.top - body.top;
    newRect.right = rect.right - body.left;
    newRect.bottom = rect.bottom - body.top;
    newRect.width = rect.width;
    newRect.height = rect.height;

    return newRect;
  }

  // get closest element before specified element that matches query
  function firstBefore(element, query) {
    while (element && element !== document.body && !element.matches(query))
      element = element.previousElementSibling || element.parentNode;

    return element;
  }

  // check if element is part of collapsed heading
  function isCollapsed(element) {
    while (element && element !== document.body) {
      if (element.dataset.collapsed === "true") return true;
      element = element.parentNode;
    }
    return false;
  }

  // expand any collapsed parent containers of element if necessary
  function expandElement(element) {
    if (isCollapsed(element)) {
      // accordion plugin
      const heading = firstBefore(element, "h2");
      if (heading) heading.click();
      // details/summary HTML element
      const summary = firstBefore(element, "summary");
      if (summary) summary.click();
    }
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);

    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // get list of elements after a start element up to element matching query
  function nextUntil(element, query, exclude) {
    const elements = [];
    while (((element = element.nextElementSibling), element)) {
      if (element.matches(query)) break;
      if (!element.matches(exclude)) elements.push(element);
    }
    return elements;
  }
</script>
<!--
  Accordion Plugin

  Allows sections of content under h2 headings to be collapsible.
-->

<script type="module">
  // whether to always start expanded ('false'), always start collapsed
  // ('true'), or start collapsed when screen small ('auto')
  const startCollapsed = "auto";

  // start script
  function start() {
    // run through each <h2> heading
    const headings = document.querySelectorAll("h2");
    for (const heading of headings) {
      addArrow(heading);

      // start expanded/collapsed based on option
      if (
        startCollapsed === "true" ||
        (startCollapsed === "auto" && isSmallScreen()) ||
        heading.dataset.collapsed === "true"
      )
        collapseHeading(heading);
      else expandElement(heading);
    }

    // attach hash change listener to window
    window.addEventListener("hashchange", onHashChange);
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) goToElement(target);
  }

  // add arrow to heading
  function addArrow(heading) {
    // add arrow button
    const arrow = document.createElement("button");
    arrow.innerHTML = document.querySelector(".icon_angle_down").innerHTML;
    arrow.classList.add("icon_button", "accordion_arrow");
    heading.insertBefore(arrow, heading.firstChild);

    // attach click listener to heading and button
    heading.addEventListener("click", onHeadingClick);
    arrow.addEventListener("click", onArrowClick);
  }

  // determine if on mobile-like device with small screen
  function isSmallScreen() {
    return Math.min(window.innerWidth, window.innerHeight) < 480;
  }

  // when <h2> heading is clicked
  function onHeadingClick(event) {
    // only collapse if <h2> itself is target of click (eg, user did
    // not click on anchor within <h2>)
    if (event.target === this) toggleCollapse(this);
  }

  // when arrow button is clicked
  function onArrowClick() {
    toggleCollapse(this.parentNode);
  }

  // collapse section if expanded, expand if collapsed
  function toggleCollapse(heading) {
    if (heading.dataset.collapsed === "false") collapseHeading(heading);
    else expandElement(heading);
  }

  // elements to exclude from collapse, such as table of contents panel,
  // hypothesis panel, etc
  const exclude = "#toc_panel, div.annotator-frame, #lightbox_overlay";

  // collapse section
  function collapseHeading(heading) {
    heading.setAttribute("data-collapsed", "true");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "true");
  }

  // expand section
  function expandElement(heading) {
    heading.setAttribute("data-collapsed", "false");
    const children = getChildren(heading);
    for (const child of children) child.setAttribute("data-collapsed", "false");
  }

  // get list of elements between this <h2> and next <h2> or <h1>
  // ("children" of the <h2> section)
  function getChildren(heading) {
    return nextUntil(heading, "h2, h1", exclude);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle down icon -->

<template class="icon_angle_down">
  <!-- modified from: https://fontawesome.com/icons/angle-down -->
  <svg width="16" height="16" viewBox="0 0 448 512">
    <path
      fill="currentColor"
      d="M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* accordion arrow button */
    .accordion_arrow {
      margin-right: 10px;
    }

    /* arrow icon when <h2> data-collapsed attribute true */
    h2[data-collapsed="true"] > .accordion_arrow > svg {
      transform: rotate(-90deg);
    }

    /* all elements (except <h2>'s) when data-collapsed attribute true */
    *:not(h2)[data-collapsed="true"] {
      display: none;
    }

    /* accordion arrow button when hovered and <h2>'s when hovered */
    .accordion_arrow:hover,
    h2[data-collapsed="true"]:hover,
    h2[data-collapsed="false"]:hover {
      cursor: pointer;
    }
  }

  /* always hide accordion arrow button on print */
  @media only print {
    .accordion_arrow {
      display: none;
    }
  }
</style>
<!--
  Anchors Plugin

  Adds an anchor next to each of a certain type of element that provides a
  human-readable url to that specific item/position in the document (e.g.
  "manuscript.html#abstract"). It also makes it such that scrolling out of view
  of a target removes its identifier from the url.
-->

<script type="module">
  // which types of elements to add anchors next to, in "document.querySelector"
  // format
  const typesQuery =
    'h1, h2, h3, div[id^="fig:"], div[id^="tbl:"], span[id^="eq:"]';

  // start script
  function start() {
    // add anchor to each element of specified types
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) addAnchor(element);

    // attach scroll listener to window
    window.addEventListener("scroll", onScroll);
  }

  // when window is scrolled
  function onScroll() {
    // if url has hash and user has scrolled out of view of hash
    // target, remove hash from url
    const tolerance = 100;
    const target = getHashTarget();
    if (target) {
      if (
        target.getBoundingClientRect().top > window.innerHeight + tolerance ||
        target.getBoundingClientRect().bottom < 0 - tolerance
      )
        history.pushState(null, null, " ");
    }
  }

  // add anchor to element
  function addAnchor(element) {
    let addTo; // element to add anchor button to

    // if figure or table, modify withId and addTo to get expected
    // elements
    if (element.id.indexOf("fig:") === 0) {
      addTo = element.querySelector("figcaption");
    } else if (element.id.indexOf("tbl:") === 0) {
      addTo = element.querySelector("caption");
    } else if (element.id.indexOf("eq:") === 0) {
      addTo = element.querySelector(".eqnos-number");
    }

    addTo = addTo || element;
    const id = element.id || null;

    // do not add anchor if element doesn't have assigned id.
    // id is generated by pandoc and is assumed to be unique and
    // human-readable
    if (!id) return;

    // create anchor button
    const anchor = document.createElement("a");
    anchor.innerHTML = document.querySelector(".icon_link").innerHTML;
    anchor.title = "Link to this part of the document";
    anchor.classList.add("icon_button", "anchor");
    anchor.dataset.ignore = "true";
    anchor.href = "#" + id;
    addTo.appendChild(anchor);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- link icon -->

<template class="icon_link">
  <!-- modified from: https://fontawesome.com/icons/link -->
  <svg width="16" height="16" viewBox="0 0 512 512">
    <path
      fill="currentColor"
      d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* anchor button */
    .anchor {
      opacity: 0;
      margin-left: 5px;
    }

    /* anchor buttons within <h2>'s */
    h2 .anchor {
      margin-left: 10px;
    }

    /* anchor buttons when hovered/focused and anything containing an anchor button when hovered */
    *:hover > .anchor,
    .anchor:hover,
    .anchor:focus {
      opacity: 1;
    }

    /* anchor button when hovered */
    .anchor:hover {
      cursor: pointer;
    }
  }

  /* always show anchor button on devices with no mouse/hover ability */
  @media (hover: none) {
    .anchor {
      opacity: 1;
    }
  }

  /* always hide anchor button on print */
  @media only print {
    .anchor {
      display: none;
    }
  }
</style>
<!-- 
    Attributes Plugin

    Allows arbitrary HTML attributes to be attached to (almost) any element.
    Place an HTML comment inside or next to the desired element with the content:
    $attribute="value"
-->

<script type="module">
  // start script
  function start() {
    // get list of comments in document
    const comments = findComments();

    for (const comment of comments)
      if (comment.parentElement)
        addAttributes(comment.parentElement, comment.nodeValue.trim());
  }

  // add html attributes to specified element based on string of
  // html attributes and values
  function addAttributes(element, text) {
    // regex's for finding attribute/value pairs in the format of
    // attribute="value" or attribute='value
    const regex2 = /\$([a-zA-Z\-]+)?=\"(.+?)\"/;
    const regex1 = /\$([a-zA-Z\-]+)?=\'(.+?)\'/;

    // loop through attribute/value pairs
    let match;
    while ((match = text.match(regex2) || text.match(regex1))) {
      // get attribute and value from regex capture groups
      let attribute = match[1];
      let value = match[2];

      // remove from string
      text = text.substring(match.index + match[0].length);

      if (!attribute || !value) break;

      // set attribute of parent element
      try {
        element.setAttribute(attribute, value);
      } catch (error) {
        console.log(error);
      }

      // special case for colspan
      if (attribute === "colspan") removeTableCells(element, value);
    }
  }

  // get list of comment elements in document
  function findComments() {
    const comments = [];

    // iterate over comment nodes in document
    function acceptNode(node) {
      return NodeFilter.FILTER_ACCEPT;
    }
    const iterator = document.createNodeIterator(
      document.body,
      NodeFilter.SHOW_COMMENT,
      acceptNode
    );
    let node;
    while ((node = iterator.nextNode())) comments.push(node);

    return comments;
  }

  // remove certain number of cells after specified cell
  function removeTableCells(cell, number) {
    number = parseInt(number);
    if (!number) return;

    // remove elements
    for (; number > 1; number--) {
      if (cell.nextElementSibling) cell.nextElementSibling.remove();
    }
  }

  // start script on DOMContentLoaded instead of load to ensure this plugins
  // runs before other plugins
  window.addEventListener("DOMContentLoaded", start);
</script>
<!--
  Jump to First Plugin

  Adds a button next to each reference entry, figure, and table that jumps the
  page to the first occurrence of a link to that item in the manuscript.
-->

<script type="module">
  // whether to add buttons next to reference entries
  const references = "true";
  // whether to add buttons next to figures
  const figures = "true";
  // whether to add buttons next to tables
  const tables = "true";

  // start script
  function start() {
    if (references !== "false")
      makeButtons(`div[id^="ref-"]`, ".csl-left-margin", "reference");
    if (figures !== "false")
      makeButtons(`div[id^="fig:"]`, "figcaption", "figure");
    if (tables !== "false") makeButtons(`div[id^="tbl:"]`, "caption", "table");
  }

  // when jump button clicked
  function onButtonClick() {
    const first = getFirstOccurrence(this.dataset.id);
    if (!first) return;

    // update url hash so navigating "back" in history will return user to button
    window.location.hash = this.dataset.id;
    // scroll to link
    const timeout = function () {
      goToElement(first, window.innerHeight * 0.5);
    };
    window.setTimeout(timeout, 0);
  }

  // get first occurrence of link to item in document
  function getFirstOccurrence(id) {
    let query = "a";
    query += '[href="#' + id + '"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelector(query);
  }

  // add button next to each reference entry, figure, or table
  function makeButtons(query, containerQuery, subject) {
    const elements = document.querySelectorAll(query);
    for (const element of elements) {
      const id = element.id;
      const buttonContainer = element.querySelector(containerQuery);
      const first = getFirstOccurrence(id);

      // if can't find link to reference or place to put button, ignore
      if (!first || !buttonContainer) continue;

      // make jump button
      let button = document.createElement("button");
      button.classList.add("icon_button", "jump_arrow");
      button.title = `Jump to the first occurrence of this ${subject} in the document`;
      const icon = document.querySelector(".icon_angle_double_up");
      button.innerHTML = icon.innerHTML;
      button.dataset.id = id;
      button.dataset.ignore = "true";
      button.addEventListener("click", onButtonClick);
      buttonContainer.prepend(button);
    }
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- angle double up icon -->

<template class="icon_angle_double_up">
  <!-- modified from: https://fontawesome.com/icons/angle-double-up -->
  <svg width="16" height="16" viewBox="0 0 320 512">
    <path
      fill="currentColor"
      d="M177 255.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 351.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 425.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1zm-34-192L7 199.7c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l96.4-96.4 96.4 96.4c9.4 9.4 24.6 9.4 33.9 0l22.6-22.6c9.4-9.4 9.4-24.6 0-33.9l-136-136c-9.2-9.4-24.4-9.4-33.8 0z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* jump button */
    .jump_arrow {
      position: relative;
      top: 0.125em;
      margin-right: 5px;
    }
  }

  /* always hide jump button on print */
  @media only print {
    .jump_arrow {
      display: none;
    }
  }
</style>
<!-- 
    Lightbox Plugin

    Makes it such that when a user clicks on an image, the image fills the
    screen and the user can pan/drag/zoom the image and navigate between other
    images in the document.
-->

<script type="module">
  // list of possible zoom/scale factors
  const zooms =
    "0.1, 0.25, 0.333333, 0.5, 0.666666, 0.75, 1, 1.25, 1.5, 1.75, 2, 2.5, 3, 3.5, 4, 5, 6, 7, 8";
  // whether to fit image to view ('fit'), display at 100% and shrink if
  // necessary ('shrink'), or always display at 100% ('100')
  const defaultZoom = "fit";
  // whether to zoom in/out toward center of view ('true') or mouse ('false')
  const centerZoom = "false";

  // start script
  function start() {
    // run through each <img> element
    const imgs = document.querySelectorAll("figure > img");
    let count = 1;
    for (const img of imgs) {
      img.classList.add("lightbox_document_img");
      img.dataset.number = count;
      img.dataset.total = imgs.length;
      img.addEventListener("click", openLightbox);
      count++;
    }

    // attach mouse and key listeners to window
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("keyup", onKeyUp);
  }

  // when mouse is moved anywhere in window
  function onWindowMouseMove(event) {
    window.mouseX = event.clientX;
    window.mouseY = event.clientY;
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("lightbox_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("lightbox_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeLightbox();
        break;
    }
  }

  // open lightbox
  function openLightbox() {
    const lightbox = makeLightbox(this);
    if (!lightbox) return;

    blurBody(lightbox);
    document.body.appendChild(lightbox);
  }

  // make lightbox
  function makeLightbox(img) {
    // delete lightbox if it exists, start fresh
    closeLightbox();

    // create screen overlay containing lightbox
    const overlay = document.createElement("div");
    overlay.id = "lightbox_overlay";

    // create image info boxes
    const numberInfo = document.createElement("div");
    const zoomInfo = document.createElement("div");
    numberInfo.id = "lightbox_number_info";
    zoomInfo.id = "lightbox_zoom_info";

    // create container for image
    const imageContainer = document.createElement("div");
    imageContainer.id = "lightbox_image_container";
    const lightboxImg = makeLightboxImg(
      img,
      imageContainer,
      numberInfo,
      zoomInfo
    );
    imageContainer.appendChild(lightboxImg);

    // create bottom container for caption and navigation buttons
    const bottomContainer = document.createElement("div");
    bottomContainer.id = "lightbox_bottom_container";
    const caption = makeCaption(img);
    const prevButton = makePrevButton(img);
    const nextButton = makeNextButton(img);
    bottomContainer.appendChild(prevButton);
    bottomContainer.appendChild(caption);
    bottomContainer.appendChild(nextButton);

    // attach top middle and bottom to overlay
    overlay.appendChild(numberInfo);
    overlay.appendChild(zoomInfo);
    overlay.appendChild(imageContainer);
    overlay.appendChild(bottomContainer);

    return overlay;
  }

  // make <img> object that is intuitively draggable and zoomable
  function makeLightboxImg(sourceImg, container, numberInfoBox, zoomInfoBox) {
    // create copy of source <img>
    const img = sourceImg.cloneNode(true);
    img.classList.remove("lightbox_document_img");
    img.removeAttribute("id");
    img.removeAttribute("width");
    img.removeAttribute("height");
    img.style.position = "unset";
    img.style.margin = "0";
    img.style.padding = "0";
    img.style.width = "";
    img.style.height = "";
    img.style.minWidth = "";
    img.style.minHeight = "";
    img.style.maxWidth = "";
    img.style.maxHeight = "";
    img.id = "lightbox_img";

    // build sorted list of zoomSteps
    const zoomSteps = zooms.split(/[^0-9.]/).map((step) => parseFloat(step));
    zoomSteps.sort((a, b) => a - b);

    // <img> object property variables
    let zoom = 1;
    let translateX = 0;
    let translateY = 0;
    let clickMouseX = undefined;
    let clickMouseY = undefined;
    let clickTranslateX = undefined;
    let clickTranslateY = undefined;

    updateNumberInfo();

    // update image numbers displayed in info box
    function updateNumberInfo() {
      numberInfoBox.innerHTML =
        sourceImg.dataset.number + " of " + sourceImg.dataset.total;
    }

    // update zoom displayed in info box
    function updateZoomInfo() {
      let zoomInfo = zoom * 100;
      if (!Number.isInteger(zoomInfo)) zoomInfo = zoomInfo.toFixed(2);
      zoomInfoBox.innerHTML = zoomInfo + "%";
    }

    // move to closest zoom step above current zoom
    const zoomIn = function () {
      for (const zoomStep of zoomSteps) {
        if (zoomStep > zoom) {
          zoom = zoomStep;
          break;
        }
      }
      updateTransform();
    };

    // move to closest zoom step above current zoom
    const zoomOut = function () {
      zoomSteps.reverse();
      for (const zoomStep of zoomSteps) {
        if (zoomStep < zoom) {
          zoom = zoomStep;
          break;
        }
      }
      zoomSteps.reverse();

      updateTransform();
    };

    // update display of <img> based on scale/translate properties
    const updateTransform = function () {
      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      // get new width/height after scale
      const rect = img.getBoundingClientRect();
      // limit translate
      translateX = Math.max(translateX, -rect.width / 2);
      translateX = Math.min(translateX, rect.width / 2);
      translateY = Math.max(translateY, -rect.height / 2);
      translateY = Math.min(translateY, rect.height / 2);

      // set transform
      img.style.transform =
        "translate(" +
        (translateX || 0) +
        "px," +
        (translateY || 0) +
        "px) scale(" +
        (zoom || 1) +
        ")";

      updateZoomInfo();
    };

    // fit <img> to container
    const fit = function () {
      // no x/y offset, 100% zoom by default
      translateX = 0;
      translateY = 0;
      zoom = 1;

      // widths of <img> and container
      const imgWidth = img.naturalWidth;
      const imgHeight = img.naturalHeight;
      const containerWidth = parseFloat(
        window.getComputedStyle(container).width
      );
      const containerHeight = parseFloat(
        window.getComputedStyle(container).height
      );

      // how much zooming is needed to fit <img> to container
      const xRatio = imgWidth / containerWidth;
      const yRatio = imgHeight / containerHeight;
      const maxRatio = Math.max(xRatio, yRatio);
      const newZoom = 1 / maxRatio;

      // fit <img> to container according to option
      if (defaultZoom === "shrink") {
        if (maxRatio > 1) zoom = newZoom;
      } else if (defaultZoom === "fit") zoom = newZoom;

      updateTransform();
    };

    // when mouse wheel is rolled anywhere in container
    const onContainerWheel = function (event) {
      if (!event) return;

      // let ctrl + mouse wheel to zoom behave as normal
      if (event.ctrlKey) return;

      // prevent normal scroll behavior
      event.preventDefault();
      event.stopPropagation();

      // point around which to scale img
      const viewRect = container.getBoundingClientRect();
      const viewX = (viewRect.left + viewRect.right) / 2;
      const viewY = (viewRect.top + viewRect.bottom) / 2;
      const originX = centerZoom === "true" ? viewX : mouseX;
      const originY = centerZoom === "true" ? viewY : mouseY;

      // get point on image under origin
      const oldRect = img.getBoundingClientRect();
      const oldPercentX = (originX - oldRect.left) / oldRect.width;
      const oldPercentY = (originY - oldRect.top) / oldRect.height;

      // increment/decrement zoom
      if (event.deltaY < 0) zoomIn();
      if (event.deltaY > 0) zoomOut();

      // get offset between previous image point and origin
      const newRect = img.getBoundingClientRect();
      const offsetX = originX - (newRect.left + newRect.width * oldPercentX);
      const offsetY = originY - (newRect.top + newRect.height * oldPercentY);

      // translate image to keep image point under origin
      translateX += offsetX;
      translateY += offsetY;

      // perform translate
      updateTransform();
    };

    // when container is clicked
    function onContainerClick(event) {
      // if container itself is target of click, and not other
      // element above it
      if (event.target === this) closeLightbox();
    }

    // when mouse button is pressed on image
    const onImageMouseDown = function (event) {
      // store original mouse position relative to image
      clickMouseX = window.mouseX;
      clickMouseY = window.mouseY;
      clickTranslateX = translateX;
      clickTranslateY = translateY;
      event.stopPropagation();
      event.preventDefault();
    };

    // when mouse button is released anywhere in window
    const onWindowMouseUp = function (event) {
      // reset original mouse position
      clickMouseX = undefined;
      clickMouseY = undefined;
      clickTranslateX = undefined;
      clickTranslateY = undefined;

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mouseup", onWindowMouseUp);
    };

    // when mouse is moved anywhere in window
    const onWindowMouseMove = function (event) {
      if (
        clickMouseX === undefined ||
        clickMouseY === undefined ||
        clickTranslateX === undefined ||
        clickTranslateY === undefined
      )
        return;

      // offset image based on original and current mouse position
      translateX = clickTranslateX + window.mouseX - clickMouseX;
      translateY = clickTranslateY + window.mouseY - clickMouseY;
      updateTransform();
      event.preventDefault();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("mousemove", onWindowMouseMove);
    };

    // when window is resized
    const onWindowResize = function (event) {
      fit();

      // remove global listener if lightbox removed from document
      if (!document.body.contains(container))
        window.removeEventListener("resize", onWindowResize);
    };

    // attach the necessary event listeners
    img.addEventListener("dblclick", fit);
    img.addEventListener("mousedown", onImageMouseDown);
    container.addEventListener("wheel", onContainerWheel);
    container.addEventListener("mousedown", onContainerClick);
    container.addEventListener("touchstart", onContainerClick);
    window.addEventListener("mouseup", onWindowMouseUp);
    window.addEventListener("mousemove", onWindowMouseMove);
    window.addEventListener("resize", onWindowResize);

    // run fit() after lightbox atttached to document and <img> Loaded
    // so needed container and img dimensions available
    img.addEventListener("load", fit);

    return img;
  }

  // make caption
  function makeCaption(img) {
    const caption = document.createElement("div");
    caption.id = "lightbox_caption";
    const captionSource = img.nextElementSibling;
    if (captionSource.tagName.toLowerCase() === "figcaption") {
      const captionCopy = makeCopy(captionSource);
      caption.innerHTML = captionCopy.innerHTML;
    }

    caption.addEventListener("touchstart", function (event) {
      event.stopPropagation();
    });

    return caption;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // make button to jump to previous image in document
  function makePrevButton(img) {
    const prevButton = document.createElement("button");
    prevButton.id = "lightbox_prev_button";
    prevButton.title = "Jump to the previous image in the document [←]";
    prevButton.classList.add("icon_button", "lightbox_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;

    // attach click listeners to button
    prevButton.addEventListener("click", function () {
      getPrevImg(img).click();
    });

    return prevButton;
  }

  // make button to jump to next image in document
  function makeNextButton(img) {
    const nextButton = document.createElement("button");
    nextButton.id = "lightbox_next_button";
    nextButton.title = "Jump to the next image in the document [→]";
    nextButton.classList.add("icon_button", "lightbox_button");
    nextButton.innerHTML = document.querySelector(
      ".icon_caret_right"
    ).innerHTML;

    // attach click listeners to button
    nextButton.addEventListener("click", function () {
      getNextImg(img).click();
    });

    return nextButton;
  }

  // get previous image in document
  function getPrevImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if < 1
    if (index - 1 >= 0) index--;
    else index = imgs.length - 1;
    return imgs[index];
  }

  // get next image in document
  function getNextImg(img) {
    const imgs = document.querySelectorAll(".lightbox_document_img");

    // find index of provided img
    let index;
    for (index = 0; index < imgs.length; index++) {
      if (imgs[index] === img) break;
    }

    // wrap index to other side if > total
    if (index + 1 <= imgs.length - 1) index++;
    else index = 0;
    return imgs[index];
  }

  // close lightbox
  function closeLightbox() {
    focusBody();

    const lightbox = document.getElementById("lightbox_overlay");
    if (lightbox) lightbox.remove();
  }

  // make all elements behind lightbox non-focusable
  function blurBody(overlay) {
    const all = document.querySelectorAll("*");
    for (const element of all) element.tabIndex = -1;
    document.body.classList.add("body_no_scroll");
  }

  // make all elements focusable again
  function focusBody() {
    const all = document.querySelectorAll("*");
    for (const element of all) element.removeAttribute("tabIndex");
    document.body.classList.remove("body_no_scroll");
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* regular <img> in document when hovered */
    img.lightbox_document_img:hover {
      cursor: pointer;
    }

    .body_no_scroll {
      overflow: hidden !important;
    }

    /* screen overlay */
    #lightbox_overlay {
      display: flex;
      flex-direction: column;
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.75);
      z-index: 3;
    }

    /* middle area containing lightbox image */
    #lightbox_image_container {
      flex-grow: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      padding: 20px;
    }

    /* bottom area containing caption */
    #lightbox_bottom_container {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100px;
      min-height: 100px;
      max-height: 100px;
      background: rgba(0, 0, 0, 0.5);
    }

    /* image number info text box */
    #lightbox_number_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      left: 2px;
      top: 0;
      z-index: 4;
    }

    /* zoom info text box */
    #lightbox_zoom_info {
      position: absolute;
      color: #ffffff;
      font-weight: 600;
      right: 2px;
      top: 0;
      z-index: 4;
    }

    /* copy of image caption */
    #lightbox_caption {
      box-sizing: border-box;
      display: inline-block;
      width: 100%;
      max-height: 100%;
      padding: 10px 0;
      text-align: center;
      overflow-y: auto;
      color: #ffffff;
    }

    /* navigation previous/next button */
    .lightbox_button {
      width: 100px;
      height: 100%;
      min-width: 100px;
      min-height: 100%;
      color: #ffffff;
    }

    /* navigation previous/next button when hovered */
    .lightbox_button:hover {
      background: none !important;
    }

    /* navigation button icon */
    .lightbox_button > svg {
      height: 25px;
    }

    /* figure auto-number */
    #lightbox_caption > span:first-of-type {
      font-weight: bold;
      margin-right: 5px;
    }

    /* lightbox image when hovered */
    #lightbox_img:hover {
      cursor: grab;
    }

    /* lightbox image when grabbed */
    #lightbox_img:active {
      cursor: grabbing;
    }
  }

  /* when on screen < 480px wide */
  @media only screen and (max-width: 480px) {
    /* make navigation buttons skinnier on small screens to make more room for caption text */
    .lightbox_button {
      width: 50px;
      min-width: 50px;
    }
  }

  /* always hide lightbox on print */
  @media only print {
    #lightbox_overlay {
      display: none;
    }
  }
</style>
<!-- 
  Link Highlight Plugin

  Makes it such that when a user hovers or focuses a link, other links that have
  the same target will be highlighted. It also makes it such that when clicking
  a link, the target of the link (eg reference, figure, table) is briefly
  highlighted.
-->

<script type="module">
  // whether to also highlight links that go to external urls
  const externalLinks = "false";
  // whether user must click off to unhighlight instead of just
  // un-hovering
  const clickUnhighlight = "false";
  // whether to also highlight links that are unique
  const highlightUnique = "true";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach mouse and focus listeners to link
      link.addEventListener("mouseenter", onLinkFocus);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("mouseleave", onLinkUnhover);
    }

    // attach click and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("hashchange", onHashChange);

    // run hash change on window load in case user has navigated
    // directly to hash
    onHashChange();
  }

  // when link is focused (tabbed to) or hovered
  function onLinkFocus() {
    highlight(this);
  }

  // when link is unhovered
  function onLinkUnhover() {
    if (clickUnhighlight !== "true") unhighlightAll();
  }

  // when the mouse is clicked anywhere in window
  function onClick(event) {
    unhighlightAll();
  }

  // when hash (eg manuscript.html#introduction) changes
  function onHashChange() {
    const target = getHashTarget();
    if (target) glowElement(target);
  }

  // start glow sequence on an element
  function glowElement(element) {
    const startGlow = function () {
      onGlowEnd();
      element.dataset.glow = "true";
      element.addEventListener("animationend", onGlowEnd);
    };
    const onGlowEnd = function () {
      element.removeAttribute("data-glow");
      element.removeEventListener("animationend", onGlowEnd);
    };
    startGlow();
  }

  // highlight link and all others with same target
  function highlight(link) {
    // force unhighlight all to start fresh
    unhighlightAll();

    // get links with same target
    if (!link) return;
    const sameLinks = getSameLinks(link);

    // if link unique and option is off, exit and don't highlight
    if (sameLinks.length <= 1 && highlightUnique !== "true") return;

    // highlight all same links, and "select" (special highlight) this
    // one
    for (const sameLink of sameLinks) {
      if (sameLink === link) sameLink.setAttribute("data-selected", "true");
      else sameLink.setAttribute("data-highlighted", "true");
    }
  }

  // unhighlight all links
  function unhighlightAll() {
    const links = getLinks();
    for (const link of links) {
      link.setAttribute("data-selected", "false");
      link.setAttribute("data-highlighted", "false");
    }
  }

  // get links with same target
  function getSameLinks(link) {
    const results = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        results.push(otherLink);
    }
    return results;
  }

  // get all links of types we wish to handle
  function getLinks() {
    let query = "a";
    if (externalLinks !== "true") query += '[href^="#"]';
    // exclude buttons, anchor links, toc links, etc
    query += ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    return document.querySelectorAll(query);
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<style>
  @media only screen {
    /* anything with data-highlighted attribute true */
    [data-highlighted="true"] {
      background: #ffeb3b;
    }

    /* anything with data-selected attribute true */
    [data-selected="true"] {
      background: #ff8a65 !important;
    }

    /* animation definition for glow */
    @keyframes highlight_glow {
      0% {
        background: none;
      }
      10% {
        background: #bbdefb;
      }
      100% {
        background: none;
      }
    }

    /* anything with data-glow attribute true */
    [data-glow="true"] {
      animation: highlight_glow 2s;
    }
  }
</style>
<!--
  Table of Contents Plugin

  Provides a "table of contents" (toc) panel on the side of the document that
  allows the user to conveniently navigate between sections of the document.
-->

<script type="module">
  // which types of elements to add links for, in "document.querySelector" format
  const typesQuery = "h1, h2, h3";
  // whether toc starts open. use 'true' or 'false', or 'auto' to
  // use 'true' behavior when screen wide enough and 'false' when not
  const startOpen = "false";
  // whether toc closes when clicking on toc link. use 'true' or
  // 'false', or 'auto' to use 'false' behavior when screen wide
  // enough and 'true' when not
  const clickClose = "auto";
  // if list item is more than this many characters, text will be
  // truncated
  const charLimit = "50";
  // whether or not to show bullets next to each toc item
  const bullets = "false";

  // start script
  function start() {
    // make toc panel and populate with entries (links to document
    // sections)
    const panel = makePanel();
    if (!panel) return;
    makeEntries(panel);
    // attach panel to document after making entries, so 'toc' heading
    // in panel isn't included in toc
    document.body.insertBefore(panel, document.body.firstChild);

    // initial panel state
    if (startOpen === "true" || (startOpen === "auto" && !isSmallScreen()))
      openPanel();
    else closePanel();

    // attach click, scroll, and hash change listeners to window
    window.addEventListener("click", onClick);
    window.addEventListener("scroll", onScroll);
    window.addEventListener("hashchange", onScroll);
    window.addEventListener("keyup", onKeyUp);
    onScroll();

    // add class to push document body down out of way of toc button
    document.body.classList.add("toc_body_nudge");
  }

  // determine if screen wide enough to fit toc panel
  function isSmallScreen() {
    // in default theme:
    // 816px = 8.5in = width of "page" (<body>) element
    // 260px = min width of toc panel (*2 for both sides of <body>)
    return window.innerWidth < 816 + 260 * 2;
  }

  // when mouse is clicked anywhere in window
  function onClick() {
    if (isSmallScreen()) closePanel();
  }

  // when window is scrolled or hash changed
  function onScroll() {
    highlightViewed();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    // close on esc
    if (event.key === "Escape") closePanel();
  }

  // find entry of currently viewed document section in toc and highlight
  function highlightViewed() {
    const firstId = getFirstInView(typesQuery);

    // get toc entries (links), unhighlight all, then highlight viewed
    const list = document.getElementById("toc_list");
    if (!firstId || !list) return;
    const links = list.querySelectorAll("a");
    for (const link of links) link.dataset.viewing = "false";
    const link = list.querySelector('a[href="#' + firstId + '"]');
    if (!link) return;
    link.dataset.viewing = "true";
  }

  // get first or previous toc listed element in top half of view
  function getFirstInView(query) {
    // get all elements matching query and with id
    const elements = document.querySelectorAll(query);
    const elementsWithIds = [];
    for (const element of elements) {
      if (element.id) elementsWithIds.push(element);
    }

    // get first or previous element in top half of view
    for (let i = 0; i < elementsWithIds.length; i++) {
      const element = elementsWithIds[i];
      const prevElement = elementsWithIds[Math.max(0, i - 1)];
      if (element.getBoundingClientRect().top >= 0) {
        if (element.getBoundingClientRect().top < window.innerHeight / 2)
          return element.id;
        else return prevElement.id;
      }
    }
  }

  // make panel
  function makePanel() {
    // create panel
    const panel = document.createElement("div");
    panel.id = "toc_panel";
    if (bullets === "true") panel.dataset.bullets = "true";

    // create header
    const header = document.createElement("div");
    header.id = "toc_header";

    // create toc button
    const button = document.createElement("button");
    button.id = "toc_button";
    button.innerHTML = document.querySelector(".icon_th_list").innerHTML;
    button.title = "Table of Contents";
    button.classList.add("icon_button");

    // create header text
    const text = document.createElement("h4");
    text.innerHTML = "Table of Contents";

    // create container for toc list
    const list = document.createElement("div");
    list.id = "toc_list";

    // attach click listeners
    panel.addEventListener("click", onPanelClick);
    header.addEventListener("click", onHeaderClick);
    button.addEventListener("click", onButtonClick);

    // attach elements
    header.appendChild(button);
    header.appendChild(text);
    panel.appendChild(header);
    panel.appendChild(list);

    return panel;
  }

  // create toc entries (links) to each element of the specified types
  function makeEntries(panel) {
    const elements = document.querySelectorAll(typesQuery);
    for (const element of elements) {
      // do not add link if element doesn't have assigned id
      if (!element.id) continue;

      // create link/list item
      const link = document.createElement("a");
      link.classList.add("toc_link");
      switch (element.tagName.toLowerCase()) {
        case "h1":
          link.dataset.level = "1";
          break;
        case "h2":
          link.dataset.level = "2";
          break;
        case "h3":
          link.dataset.level = "3";
          break;
        case "h4":
          link.dataset.level = "4";
          break;
      }
      link.title = element.innerText;
      let text = element.innerText;
      if (text.length > charLimit) text = text.slice(0, charLimit) + "...";
      link.innerHTML = text;
      link.href = "#" + element.id;
      link.addEventListener("click", onLinkClick);

      // attach link
      panel.querySelector("#toc_list").appendChild(link);
    }
  }

  // when panel is clicked
  function onPanelClick(event) {
    // stop click from propagating to window/document and closing panel
    event.stopPropagation();
  }

  // when header itself is clicked
  function onHeaderClick(event) {
    togglePanel();
  }

  // when button is clicked
  function onButtonClick(event) {
    togglePanel();
    // stop header underneath button from also being clicked
    event.stopPropagation();
  }

  // when link is clicked
  function onLinkClick(event) {
    if (clickClose === "true" || (clickClose === "auto" && isSmallScreen()))
      closePanel();
    else openPanel();
  }

  // open panel if closed, close if opened
  function togglePanel() {
    const panel = document.getElementById("toc_panel");
    if (!panel) return;

    if (panel.dataset.open === "true") closePanel();
    else openPanel();
  }

  // open panel
  function openPanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "true";
  }

  // close panel
  function closePanel() {
    const panel = document.getElementById("toc_panel");
    if (panel) panel.dataset.open = "false";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- th list icon -->

<template class="icon_th_list">
  <!-- modified from: https://fontawesome.com/icons/th-list -->
  <svg width="16" height="16" viewBox="0 0 512 512" tabindex="-1">
    <path
      fill="currentColor"
      d="M96 96c0 26.51-21.49 48-48 48S0 122.51 0 96s21.49-48 48-48 48 21.49 48 48zM48 208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm0 160c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm96-236h352c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h352c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H144c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* toc panel */
    #toc_panel {
      box-sizing: border-box;
      position: fixed;
      top: 0;
      left: 0;
      background: #ffffff;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      z-index: 2;
    }

    /* toc panel when closed */
    #toc_panel[data-open="false"] {
      min-width: 60px;
      width: 60px;
      height: 60px;
      border-right: solid 1px #bdbdbd;
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc panel when open */
    #toc_panel[data-open="true"] {
      min-width: 260px;
      max-width: 480px;
      /* keep panel edge consistent distance away from "page" edge */
      width: calc(((100vw - 8.5in) / 2) - 30px - 40px);
      bottom: 0;
      border-right: solid 1px #bdbdbd;
    }

    /* toc panel header */
    #toc_header {
      box-sizing: border-box;
      display: flex;
      flex-direction: row;
      align-items: center;
      height: 60px;
      margin: 0;
      padding: 20px;
    }

    /* toc panel header when hovered */
    #toc_header:hover {
      cursor: pointer;
    }

    /* toc panel header when panel open */
    #toc_panel[data-open="true"] > #toc_header {
      border-bottom: solid 1px #bdbdbd;
    }

    /* toc open/close header button */
    #toc_button {
      margin-right: 20px;
    }

    /* hide toc list and header text when closed */
    #toc_panel[data-open="false"] > #toc_header > *:not(#toc_button),
    #toc_panel[data-open="false"] > #toc_list {
      display: none;
    }

    /* toc list of entries */
    #toc_list {
      box-sizing: border-box;
      width: 100%;
      padding: 20px;
      position: absolute;
      top: calc(60px + 1px);
      bottom: 0;
      overflow: auto;
    }

    /* toc entry, link to section in document */
    .toc_link {
      display: block;
      padding: 5px;
      position: relative;
      font-weight: 600;
      text-decoration: none;
    }

    /* toc entry when hovered or when "viewed" */
    .toc_link:hover,
    .toc_link[data-viewing="true"] {
      background: #f5f5f5;
    }

    /* toc entry, level 1 indentation */
    .toc_link[data-level="1"] {
      margin-left: 0;
    }

    /* toc entry, level 2 indentation */
    .toc_link[data-level="2"] {
      margin-left: 20px;
    }

    /* toc entry, level 3 indentation */
    .toc_link[data-level="3"] {
      margin-left: 40px;
    }

    /* toc entry, level 4 indentation */
    .toc_link[data-level="4"] {
      margin-left: 60px;
    }

    /* toc entry bullets */
    #toc_panel[data-bullets="true"] .toc_link[data-level]:before {
      position: absolute;
      left: -15px;
      top: -1px;
      font-size: 1.5em;
    }

    /* toc entry, level 2 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="2"]:before {
      content: "\2022";
    }

    /* toc entry, level 3 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="3"]:before {
      content: "\25AB";
    }

    /* toc entry, level 4 bullet */
    #toc_panel[data-bullets="true"] .toc_link[data-level="4"]:before {
      content: "-";
    }
  }

  /* when on screen < 8.5in wide */
  @media only screen and (max-width: 8.5in) {
    /* push <body> ("page") element down to make room for toc icon */
    .toc_body_nudge {
      padding-top: 60px;
    }

    /* toc icon when panel closed and not hovered */
    #toc_panel[data-open="false"]:not(:hover) {
      background: rgba(255, 255, 255, 0.75);
    }
  }

  /* always hide toc panel on print */
  @media only print {
    #toc_panel {
      display: none;
    }
  }
</style>
<!-- 
  Tooltips Plugin

  Makes it such that when the user hovers or focuses a link to a citation or
  figure, a tooltip appears with a preview of the reference content, along with
  arrows to navigate between instances of the same reference in the document.
-->

<script type="module">
  // whether user must click off to close tooltip instead of just un-hovering
  const clickClose = "false";
  // delay (in ms) between opening and closing tooltip
  const delay = "100";

  // start script
  function start() {
    const links = getLinks();
    for (const link of links) {
      // attach hover and focus listeners to link
      link.addEventListener("mouseover", onLinkHover);
      link.addEventListener("mouseleave", onLinkUnhover);
      link.addEventListener("focus", onLinkFocus);
      link.addEventListener("touchend", onLinkTouch);
    }

    // attach mouse, key, and resize listeners to window
    window.addEventListener("mousedown", onClick);
    window.addEventListener("touchstart", onClick);
    window.addEventListener("keyup", onKeyUp);
    window.addEventListener("resize", onResize);
  }

  // when link is hovered
  function onLinkHover() {
    // function to open tooltip
    const delayOpenTooltip = function () {
      openTooltip(this);
    }.bind(this);

    // run open function after delay
    this.openTooltipTimer = window.setTimeout(delayOpenTooltip, delay);
  }

  // when mouse leaves link
  function onLinkUnhover() {
    // cancel opening tooltip
    window.clearTimeout(this.openTooltipTimer);

    // don't close on unhover if option specifies
    if (clickClose === "true") return;

    // function to close tooltip
    const delayCloseTooltip = function () {
      // if tooltip open and if mouse isn't over tooltip, close
      const tooltip = document.getElementById("tooltip");
      if (tooltip && !tooltip.matches(":hover")) closeTooltip();
    };

    // run close function after delay
    this.closeTooltipTimer = window.setTimeout(delayCloseTooltip, delay);
  }

  // when link is focused (tabbed to)
  function onLinkFocus(event) {
    openTooltip(this);
  }

  // when link is touched on touch screen
  function onLinkTouch(event) {
    // attempt to force hover state on first tap always, and trigger
    // regular link click (and navigation) on second tap
    if (event.target === document.activeElement) event.target.click();
    else {
      document.activeElement.blur();
      event.target.focus();
    }
    if (event.cancelable) event.preventDefault();
    event.stopPropagation();
    return false;
  }

  // when mouse is clicked anywhere in window
  function onClick(event) {
    closeTooltip();
  }

  // when key pressed
  function onKeyUp(event) {
    if (!event || !event.key) return;

    switch (event.key) {
      // trigger click of prev button
      case "ArrowLeft":
        const prevButton = document.getElementById("tooltip_prev_button");
        if (prevButton) prevButton.click();
        break;
      // trigger click of next button
      case "ArrowRight":
        const nextButton = document.getElementById("tooltip_next_button");
        if (nextButton) nextButton.click();
        break;
      // close on esc
      case "Escape":
        closeTooltip();
        break;
    }
  }

  // when window is resized or zoomed
  function onResize() {
    closeTooltip();
  }

  // get all links of types we wish to handle
  function getLinks() {
    const queries = [];
    // exclude buttons, anchor links, toc links, etc
    const exclude =
      ":not(.button):not(.icon_button):not(.anchor):not(.toc_link)";
    queries.push('a[href^="#ref-"]' + exclude); // citation links
    queries.push('a[href^="#fig:"]' + exclude); // figure links
    const query = queries.join(", ");
    return document.querySelectorAll(query);
  }

  // get links with same target, get index of link in set, get total
  // same links
  function getSameLinks(link) {
    const sameLinks = [];
    const links = getLinks();
    for (const otherLink of links) {
      if (otherLink.getAttribute("href") === link.getAttribute("href"))
        sameLinks.push(otherLink);
    }

    return {
      elements: sameLinks,
      index: sameLinks.indexOf(link),
      total: sameLinks.length,
    };
  }

  // open tooltip
  function openTooltip(link) {
    // delete tooltip if it exists, start fresh
    closeTooltip();

    // make tooltip element
    const tooltip = makeTooltip(link);

    // if source couldn't be found and tooltip not made, exit
    if (!tooltip) return;

    // make navbar elements
    const navBar = makeNavBar(link);
    if (navBar) tooltip.firstElementChild.appendChild(navBar);

    // attach tooltip to page
    document.body.appendChild(tooltip);

    // position tooltip
    const position = function () {
      positionTooltip(link);
    };
    position();

    // if tooltip contains images, position again after they've loaded
    const imgs = tooltip.querySelectorAll("img");
    for (const img of imgs) img.addEventListener("load", position);
  }

  // close (delete) tooltip
  function closeTooltip() {
    const tooltip = document.getElementById("tooltip");
    if (tooltip) tooltip.remove();
  }

  // make tooltip
  function makeTooltip(link) {
    // get target element that link points to
    const source = getSource(link);

    // if source can't be found, exit
    if (!source) return;

    // create new tooltip
    const tooltip = document.createElement("div");
    tooltip.id = "tooltip";
    const tooltipContent = document.createElement("div");
    tooltipContent.id = "tooltip_content";
    tooltip.appendChild(tooltipContent);

    // make copy of source node and put in tooltip
    const sourceCopy = makeCopy(source);
    tooltipContent.appendChild(sourceCopy);

    // attach mouse event listeners
    tooltip.addEventListener("click", onTooltipClick);
    tooltip.addEventListener("mousedown", onTooltipClick);
    tooltip.addEventListener("touchstart", onTooltipClick);
    tooltip.addEventListener("mouseleave", onTooltipUnhover);

    // (for interaction with lightbox plugin)
    // transfer click on tooltip copied img to original img
    const sourceImg = source.querySelector("img");
    const sourceCopyImg = sourceCopy.querySelector("img");
    if (sourceImg && sourceCopyImg) {
      const clickImg = function () {
        sourceImg.click();
        closeTooltip();
      };
      sourceCopyImg.addEventListener("click", clickImg);
    }

    return tooltip;
  }

  // make carbon copy of html dom element
  function makeCopy(source) {
    const sourceCopy = source.cloneNode(true);

    // delete elements marked with ignore (eg anchor and jump buttons)
    const deleteFromCopy = sourceCopy.querySelectorAll('[data-ignore="true"]');
    for (const element of deleteFromCopy) element.remove();

    // delete certain element attributes
    const attributes = [
      "id",
      "data-collapsed",
      "data-selected",
      "data-highlighted",
      "data-glow",
      "class",
    ];
    for (const attribute of attributes) {
      sourceCopy.removeAttribute(attribute);
      const elements = sourceCopy.querySelectorAll("[" + attribute + "]");
      for (const element of elements) element.removeAttribute(attribute);
    }

    return sourceCopy;
  }

  // when tooltip is clicked
  function onTooltipClick(event) {
    // when user clicks on tooltip, stop click from transferring
    // outside of tooltip (eg, click off to close tooltip, or eg click
    // off to unhighlight same refs)
    event.stopPropagation();
  }

  // when tooltip is unhovered
  function onTooltipUnhover(event) {
    if (clickClose === "true") return;

    // make sure new mouse/touch/focus no longer over tooltip or any
    // element within it
    const tooltip = document.getElementById("tooltip");
    if (!tooltip) return;
    if (this.contains(event.relatedTarget)) return;

    closeTooltip();
  }

  // make nav bar to go betwen prev/next instances of same reference
  function makeNavBar(link) {
    // find other links to the same source
    const sameLinks = getSameLinks(link);

    // don't show nav bar when singular reference
    if (sameLinks.total <= 1) return;

    // find prev/next links with same target
    const prevLink = getPrevLink(link, sameLinks);
    const nextLink = getNextLink(link, sameLinks);

    // create nav bar
    const navBar = document.createElement("div");
    navBar.id = "tooltip_nav_bar";
    const text = sameLinks.index + 1 + " of " + sameLinks.total;

    // create nav bar prev/next buttons
    const prevButton = document.createElement("button");
    const nextButton = document.createElement("button");
    prevButton.id = "tooltip_prev_button";
    nextButton.id = "tooltip_next_button";
    prevButton.title =
      "Jump to the previous occurence of this item in the document [←]";
    nextButton.title =
      "Jump to the next occurence of this item in the document [→]";
    prevButton.classList.add("icon_button");
    nextButton.classList.add("icon_button");
    prevButton.innerHTML = document.querySelector(".icon_caret_left").innerHTML;
    nextButton.innerHTML =
      document.querySelector(".icon_caret_right").innerHTML;
    navBar.appendChild(prevButton);
    navBar.appendChild(document.createTextNode(text));
    navBar.appendChild(nextButton);

    // attach click listeners to buttons
    prevButton.addEventListener("click", function () {
      onPrevNextClick(link, prevLink);
    });
    nextButton.addEventListener("click", function () {
      onPrevNextClick(link, nextLink);
    });

    return navBar;
  }

  // get previous link with same target
  function getPrevLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if < 1
    let index;
    if (sameLinks.index - 1 >= 0) index = sameLinks.index - 1;
    else index = sameLinks.total - 1;
    return sameLinks.elements[index];
  }

  // get next link with same target
  function getNextLink(link, sameLinks) {
    if (!sameLinks) sameLinks = getSameLinks(link);
    // wrap index to other side if > total
    let index;
    if (sameLinks.index + 1 <= sameLinks.total - 1) index = sameLinks.index + 1;
    else index = 0;
    return sameLinks.elements[index];
  }

  // get element that is target of link or url hash
  function getSource(link) {
    const hash = link ? link.hash : window.location.hash;
    const id = hash.slice(1);
    let target = document.querySelector('[id="' + id + '"]');
    if (!target) return;

    // if ref or figure, modify target to get expected element
    if (id.indexOf("ref-") === 0) target = target.querySelector(":nth-child(2)");
    else if (id.indexOf("fig:") === 0) target = target.querySelector("figure");

    return target;
  }

  // when prev/next arrow button is clicked
  function onPrevNextClick(link, prevNextLink) {
    if (link && prevNextLink)
      goToElement(prevNextLink, window.innerHeight * 0.5);
  }

  // scroll to and focus element
  function goToElement(element, offset) {
    // expand accordion section if collapsed
    expandElement(element);
    const y =
      getRectInView(element).top -
      getRectInView(document.documentElement).top -
      (offset || 0);
    // trigger any function listening for "onscroll" event
    window.dispatchEvent(new Event("scroll"));
    window.scrollTo(0, y);
    document.activeElement.blur();
    element.focus();
  }

  // determine position to place tooltip based on link position in
  // viewport and tooltip size
  function positionTooltip(link, left, top) {
    const tooltipElement = document.getElementById("tooltip");
    if (!tooltipElement) return;

    // get convenient vars for position/dimensions of
    // link/tooltip/page/view
    link = getRectInPage(link);
    const tooltip = getRectInPage(tooltipElement);
    const view = getRectInPage();

    // horizontal positioning
    if (left)
      // use explicit value
      left = left;
    else if (link.left + tooltip.width < view.right)
      // fit tooltip to right of link
      left = link.left;
    else if (link.right - tooltip.width > view.left)
      // fit tooltip to left of link
      left = link.right - tooltip.width;
    // center tooltip in view
    else left = (view.right - view.left) / 2 - tooltip.width / 2;

    // vertical positioning
    if (top)
      // use explicit value
      top = top;
    else if (link.top - tooltip.height > view.top)
      // fit tooltip above link
      top = link.top - tooltip.height;
    else if (link.bottom + tooltip.height < view.bottom)
      // fit tooltip below link
      top = link.bottom;
    else {
      // center tooltip in view
      top = view.top + view.height / 2 - tooltip.height / 2;
      // nudge off of link to left/right if possible
      if (link.right + tooltip.width < view.right) left = link.right;
      else if (link.left - tooltip.width > view.left)
        left = link.left - tooltip.width;
    }

    tooltipElement.style.left = left + "px";
    tooltipElement.style.top = top + "px";
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- caret left icon -->

<template class="icon_caret_left">
  <!-- modified from: https://fontawesome.com/icons/caret-left -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M192 127.338v257.324c0 17.818-21.543 26.741-34.142 14.142L29.196 270.142c-7.81-7.81-7.81-20.474 0-28.284l128.662-128.662c12.599-12.6 34.142-3.676 34.142 14.142z"
    ></path>
  </svg>
</template>

<!-- caret right icon -->

<template class="icon_caret_right">
  <!-- modified from: https://fontawesome.com/icons/caret-right -->
  <svg width="16" height="16" viewBox="0 0 192 512">
    <path
      fill="currentColor"
      d="M0 384.662V127.338c0-17.818 21.543-26.741 34.142-14.142l128.662 128.662c7.81 7.81 7.81 20.474 0 28.284L34.142 398.804C21.543 411.404 0 402.48 0 384.662z"
    ></path>
  </svg>
</template>

<style>
  @media only screen {
    /* tooltip container */
    #tooltip {
      position: absolute;
      width: 50%;
      min-width: 240px;
      max-width: 75%;
      z-index: 1;
    }

    /* tooltip content */
    #tooltip_content {
      margin-bottom: 5px;
      padding: 20px;
      border-radius: 5px;
      border: solid 1px #bdbdbd;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
      background: #ffffff;
      overflow-wrap: break-word;
    }

    /* tooltip copy of paragraphs and figures */
    #tooltip_content > p,
    #tooltip_content > figure {
      margin: 0;
      max-height: 320px;
      overflow-y: auto;
    }

    /* tooltip copy of <img> */
    #tooltip_content > figure > img,
    #tooltip_content > figure > svg {
      max-height: 260px;
    }

    /* navigation bar */
    #tooltip_nav_bar {
      margin-top: 10px;
      text-align: center;
    }

    /* navigation bar previous/next buton */
    #tooltip_nav_bar > .icon_button {
      position: relative;
      top: 3px;
    }

    /* navigation bar previous button */
    #tooltip_nav_bar > .icon_button:first-of-type {
      margin-right: 5px;
    }

    /* navigation bar next button */
    #tooltip_nav_bar > .icon_button:last-of-type {
      margin-left: 5px;
    }
  }

  /* always hide tooltip on print */
  @media only print {
    #tooltip {
      display: none;
    }
  }
</style>
<!--
  Analytics Plugin (third-party) 
  
  Copy and paste code from Google Analytics or similar service here.
-->
<!-- 
  Annotations Plugin

  Allows public annotation of the  manuscript. See https://web.hypothes.is/.
-->

<script type="module">
  // configuration
  window.hypothesisConfig = function () {
    return {
      branding: {
        accentColor: "#2196f3",
        appBackgroundColor: "#f8f8f8",
        ctaBackgroundColor: "#f8f8f8",
        ctaTextColor: "#000000",
        selectionFontFamily: "Open Sans, Helvetica, sans serif",
        annotationFontFamily: "Open Sans, Helvetica, sans serif",
      },
    };
  };

  // hypothesis client script
  const embed = "https://hypothes.is/embed.js";
  // hypothesis annotation count query url
  const query = "https://api.hypothes.is/api/search?limit=0&url=";

  // start script
  function start() {
    const button = makeButton();
    document.body.insertBefore(button, document.body.firstChild);
    insertCount(button);
  }

  // make button
  function makeButton() {
    // create button
    const button = document.createElement("button");
    button.id = "hypothesis_button";
    button.innerHTML = document.querySelector(".icon_hypothesis").innerHTML;
    button.title = "Hypothesis annotations";
    button.classList.add("icon_button");

    function onClick(event) {
      onButtonClick(event, button);
    }

    // attach click listeners
    button.addEventListener("click", onClick);

    return button;
  }

  // insert annotations count
  async function insertCount(button) {
    // get annotation count from Hypothesis based on url
    let count = "-";
    try {
      const canonical = document.querySelector('link[rel="canonical"]');
      const location = window.location;
      const url = encodeURIComponent((canonical || location).href);
      const response = await fetch(query + url);
      const json = await response.json();
      count = json.total || "-";
    } catch (error) {
      console.log(error);
    }

    // put count into button
    const counter = document.createElement("span");
    counter.id = "hypothesis_count";
    counter.innerHTML = count;
    button.title = "View " + count + " Hypothesis annotations";
    button.append(counter);
  }

  // when button is clicked
  function onButtonClick(event, button) {
    const script = document.createElement("script");
    script.src = embed;
    document.body.append(script);
    button.remove();
  }

  // start script when document is finished loading
  window.addEventListener("load", start);
</script>

<!-- hypothesis icon -->

<template class="icon_hypothesis">
  <!-- modified from: https://simpleicons.org/icons/hypothesis.svg / https://git.io/Jf1VB -->
  <svg width="16" height="16" viewBox="0 0 24 24" tabindex="-1">
    <path
      fill="currentColor"
      d="M3.43 0C2.5 0 1.72 .768 1.72 1.72V18.86C1.72 19.8 2.5 20.57 3.43 20.57H9.38L12 24L14.62 20.57H20.57C21.5 20.57 22.29 19.8 22.29 18.86V1.72C22.29 .77 21.5 0 20.57 0H3.43M5.14 3.43H7.72V9.43S8.58 7.72 10.28 7.72C12 7.72 13.74 8.57 13.74 11.24V17.14H11.16V12C11.16 10.61 10.28 10.07 9.43 10.29C8.57 10.5 7.72 11.41 7.72 13.29V17.14H5.14V3.43M18 13.72C18.95 13.72 19.72 14.5 19.72 15.42A1.71 1.71 0 0 1 18 17.13A1.71 1.71 0 0 1 16.29 15.42C16.29 14.5 17.05 13.71 18 13.71Z"
      tabindex="-1"
    ></path>
  </svg>
</template>

<style>
  /* hypothesis activation button */
  #hypothesis_button {
    box-sizing: border-box;
    position: fixed;
    top: 0;
    right: 0;
    width: 60px;
    height: 60px;
    background: #ffffff;
    border-radius: 0;
    border-left: solid 1px #bdbdbd;
    border-bottom: solid 1px #bdbdbd;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
    z-index: 2;
  }

  /* hypothesis button svg */
  #hypothesis_button > svg {
    position: relative;
    top: -4px;
  }

  /* hypothesis annotation count */
  #hypothesis_count {
    position: absolute;
    left: 0;
    right: 0;
    bottom: 5px;
  }

  /* side panel */
  .annotator-frame {
    width: 280px !important;
  }

  /* match highlight color to rest of theme */
  .annotator-highlights-always-on .annotator-hl {
    background-color: #ffeb3b !important;
  }

  /* match focused color to rest of theme */
  .annotator-hl.annotator-hl-focused {
    background-color: #ff8a65 !important;
  }

  /* match bucket bar color to rest of theme */
  .annotator-bucket-bar {
    background: #f5f5f5 !important;
  }

  /* always hide button, toolbar, and tooltip on print */
  @media only print {
    #hypothesis_button {
      display: none;
    }

    .annotator-frame {
      display: none !important;
    }

    hypothesis-adder {
      display: none !important;
    }
  }
</style>
<!-- 
  Mathjax Plugin (third-party) 

  Allows the proper rendering of math/equations written in LaTeX.
  See https://www.mathjax.org/.
-->

<script type="text/x-mathjax-config">
  // configuration
  MathJax.Hub.Config({
    "CommonHTML": { linebreaks: { automatic: true } },
    "HTML-CSS": { linebreaks: { automatic: true } },
    "SVG": { linebreaks: { automatic: true } },
    "fast-preview": { disabled: true }
  });
</script>

<script
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
  integrity="sha512-0doc9hKxR3PYwso42RD1p5ySZpzzuDiOwMrdCEh2WdJZCjcmFKc/wEnL+z8fBQrnHoiNWbo+3fiGkOYXBdQp4A=="
  crossorigin="anonymous"
></script>

<style>
  /* mathjax containers */
  .math.display > span:not(.MathJax_Preview) {
    /* turn inline element (no dimensions) into block (allows fixed width and thus scrolling) */
    display: flex !important;
    overflow-x: auto !important;
    overflow-y: hidden !important;
    justify-content: center;
    align-items: center;
    margin: 0 !important;
  }

  /* right click menu */
  .MathJax_Menu {
    border-radius: 5px !important;
    border: solid 1px #bdbdbd !important;
    box-shadow: none !important;
  }

  /* equation auto-number */
  span[id^="eq:"] > span.math.display + span {
    font-weight: 600;
  }

  /* equation */
  span[id^="eq:"] > span.math.display > span {
    /* nudge to make room for equation auto-number and anchor */
    margin-right: 60px !important;
  }
</style>
</body>
</html>
